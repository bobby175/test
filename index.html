<!DOCTYPE html>
<html lang="id">
<head>

    <!-- PREVIEW LINK WHATSAPP / TELEGRAM -->
    <meta property="og:title" content="Tolong di buka ya cantikk ðŸ’–">
    <meta property="og:description" content="Ada sesuatu yang spesial buat kamu âœ¨">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://DOMAIN-KAMU">
    <meta property="og:image" content="https://bit.ly/4j4MtEq">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="1200">
    <meta property="og:image:type" content="image/jpeg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Tolong di buka ya cantikk ðŸ’–">
    <meta name="twitter:description" content="Ada sesuatu yang spesial buat kamu âœ¨">
    <meta name="twitter:image" content="https://bit.ly/4j4MtEq">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otanjoubi Omedetou Wulan Ayu D.W.</title>
    <style>
        :root {
            --pink: #ff75e6;
            --pink-light: #ffb7f5;
            --pink-dark: #ff29f5;
            --base-font-size: 16px;
        }

        /* Responsive font sizes */
        html {
            font-size: var(--base-font-size);
        }

        @media (max-width: 768px) {
            :root {
                --base-font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            :root {
                --base-font-size: 12px;
            }
        }

        @media (min-width: 1200px) {
            :root {
                --base-font-size: 18px;
            }
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(180deg, #0b0712 0%, #1b1530 100%);
            font-family: 'Poppins', sans-serif;
            color: #fff;
            height: 100vh;
            width: 100vw;
            position: relative;
        }

        /* START SCREEN */

/* ===== RAINBOW GRADIENT START SCREEN ===== */
#startScreen{
  background: linear-gradient(
    270deg,
    #ff4d4d,
    #ff9f4d,
    #ffee4d,
    #4dff88,
    #4dd2ff,
    #8f4dff,
    #ff4dd2
  );
  background-size: 1400% 1400%;
  animation: rainbowBG 18s ease-in-out infinite;
}

@keyframes rainbowBG{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
/* ====================================== */

        #startScreen {
            position: fixed;
            inset: 0;
            background: linear-gradient(var(--pink-light), var(--pink));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 1000;
            overflow: hidden;
            padding: 1rem;
        }

        #startScreen.hidden {
            display: none;
        }

        #startScreen h2 {
            font-size: clamp(1.5rem, 5vw, 2.2rem);
            color: #fff;
            text-shadow: 0 0 10px #ff00f7;
            margin-bottom: 0.8rem;
            animation: floatUp 2s infinite;
            line-height: 1.2;
            max-width: 90%;
        }

        #openBtn {
            padding: clamp(0.6rem, 2.5vw, 1rem) clamp(1.2rem, 5vw, 2rem);
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            border-radius: 2rem;
            border: none;
            background: var(--pink-dark);
            color: #fff;
            cursor: pointer;
            box-shadow: 0 0 15px #ff00ea;
            animation: pulse 1.5s infinite;
            transition: all 0.3s ease;
            position: relative;
            z-index: 10;
            min-height: 3rem;
        }

        #openBtn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px #ff00ea;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.08);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floatUp {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        /* ANIMASI CUTE UNTUK MENU AWAL */
        .bouncing-heart {
            position: absolute;
            font-size: clamp(0.9rem, 2.8vw, 1.6rem);
            animation: bounceHeart 4s infinite;
            z-index: 1;
        }

        @keyframes bounceHeart {
            0%, 100% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0.8;
            }
            25% {
                transform: translateY(-15px) translateX(8px) rotate(8deg);
            }
            50% {
                transform: translateY(-8px) translateX(-4px) rotate(-4deg);
            }
            75% {
                transform: translateY(-12px) translateX(6px) rotate(6deg);
            }
        }

        .floating-star {
            position: absolute;
            font-size: clamp(0.7rem, 2.2vw, 1.2rem);
            animation: floatStar 6s infinite linear;
            z-index: 1;
        }

        @keyframes floatStar {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(calc(var(--x-move) * 100px)) rotate(360deg);
                opacity: 0;
            }
        }

        .sparkle-dot {
            position: absolute;
            width: clamp(2px, 0.8vw, 5px);
            height: clamp(2px, 0.8vw, 5px);
            background: white;
            border-radius: 50%;
            animation: sparkle 2s infinite;
            z-index: 1;
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1.1);
            }
        }

        .cute-bunny {
            position: absolute;
            font-size: clamp(1.3rem, 5.5vw, 2.7rem);
            animation: hopBunny 8s infinite;
            z-index: 1;
        }

        @keyframes hopBunny {
            0%, 100% {
                transform: translateY(0) translateX(0) rotate(0deg);
            }
            25% {
                transform: translateY(-25px) translateX(40px) rotate(4deg);
            }
            50% {
                transform: translateY(0) translateX(80px) rotate(0deg);
            }
            75% {
                transform: translateY(-25px) translateX(120px) rotate(-4deg);
            }
        }

        .floating-cake {
            position: absolute;
            font-size: clamp(1rem, 4.5vw, 2.2rem);
            animation: floatCake 10s infinite ease-in-out;
            z-index: 1;
        }

        @keyframes floatCake {
            0%, 100% {
                transform: translateY(0) translateX(0) rotate(0deg);
            }
            33% {
                transform: translateY(-35px) translateX(25px) rotate(8deg);
            }
            66% {
                transform: translateY(-15px) translateX(-15px) rotate(-4deg);
            }
        }

        .bubble {
            position: absolute;
            width: clamp(12px, 3.5vw, 25px);
            height: clamp(12px, 3.5vw, 25px);
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            animation: floatBubble 8s infinite ease-in-out;
            z-index: 1;
        }

        @keyframes floatBubble {
            0%, 100% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0.7;
            }
            50% {
                transform: translateY(-50px) translateX(15px) scale(1.1);
                opacity: 0.9;
            }
        }

        .rotating-gift {
            position: absolute;
            font-size: clamp(0.9rem, 3.5vw, 2rem);
            animation: rotateGift 5s infinite linear;
            z-index: 1;
        }

        @keyframes rotateGift {
            0% {
                transform: rotate(0deg) scale(1);
            }
            50% {
                transform: rotate(180deg) scale(1.05);
            }
            100% {
                transform: rotate(360deg) scale(1);
            }
        }

        .dancing-text {
            display: inline-block;
            animation: danceText 3s infinite ease-in-out;
        }

        @keyframes danceText {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-4px) rotate(1.5deg);
            }
            50% {
                transform: translateY(0) rotate(0deg);
            }
            75% {
                transform: translateY(-2px) rotate(-1.5deg);
            }
        }

        /* MESSAGE CENTER */
        #messageBox {
            position: fixed;
            inset: 0;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 20;
            pointer-events: none;
            padding: 0.8rem;
        }

        #messageContent {
            width: min(95%, 650px);
            padding: clamp(1.2rem, 4vw, 2rem);
            border-radius: 1.2rem;
            text-align: center;
            color: #fff;
            font-size: clamp(0.9rem, 3vw, 1.3rem);
            pointer-events: auto;
            position: relative;
            overflow: visible;
            animation: popIn 0.9s ease-out forwards;
            background: rgba(0, 0, 0, 0.15);
            border: none;
            box-shadow: none;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* ==================== TATA LETAK DESKTOP ==================== */
        @media (min-width: 1024px) {
            #messageBox {
                padding: 2rem;
            }
            
            #messageContent {
                display: grid;
                grid-template-columns: 1fr 1.5fr 1fr;
                grid-template-rows: auto auto 1fr auto auto;
                gap: 1.2rem;
                max-width: 95%;
                width: 95%;
                padding: 2rem;
                text-align: center;
                background: rgba(0, 0, 0, 0.15);
                border: none;
                height: auto;
                min-height: unset;
                max-height: none;
                overflow: visible;
            }
            
            /* KOLOM 1: Foto, nama, tanggal, dan hati */
            .profile-container {
                grid-column: 1;
                grid-row: 1 / span 2;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                margin-bottom: 0;
            }
            
            /* Nama Wulan di bawah foto */
            .name-under-photo {
                grid-column: 1;
                grid-row: 3;
                margin-top: 0.8rem;
                font-size: clamp(1.1rem, 1.5vw, 1.4rem);
                color: #ffd6f4;
                text-shadow: 0 0 8px rgba(255, 150, 255, 0.8);
                font-weight: bold;
                text-align: center;
                width: 100%;
            }
            
            /* Tanggal lahir dan usia */
            #timeWrapper {
                grid-column: 1;
                grid-row: 4;
                margin-top: 0.5rem;
                width: 100%;
                background: transparent;
                padding: 0.8rem;
                border-radius: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                border: none;
            }
            
            /* Detak hati */
            #heartWrap {
                grid-column: 1;
                grid-row: 5;
                text-align: center;
                margin-top: 0.8rem;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100%;
            }
            
            /*================= KOLOM 2 =================*/
            /* Judul */
            #title {
                grid-column: 2;
                grid-row: 1;
                margin-bottom: 0.5rem;
                font-size: clamp(1.4rem, 2vw, 1.8rem); 
                line-height: 1.1;
                text-align: center;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                height: 100%;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            /* Isi pesan */
            #typedText {
                grid-column: 2;
                grid-row: 2 / span 4;

                min-height: unset;
                max-height: none;
                height: auto;

                overflow: visible;
                white-space: pre-line;

                margin-bottom: 0;
                padding: 1rem;
                background: transparent;
                border-radius: 0;
                font-size: clamp(0.75rem, 1vw, 0.95rem);
                line-height: 1.5;
                text-align: center;
                border: none;
            }
            
            /*=============== KOLOM 3 ============*/
            /* GIF Animasi */
            .gift-gif-container {
                grid-column: 3;
                grid-row: 1 / span 3;
                margin: 0 auto;
                max-width: 180px;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            
            /* tombol hadiah */
            .btnRow {
                grid-column: 3;
                grid-row: 4 / span 2;
                margin-top: 0.5rem;
                background: transparent;
                padding: 0.8rem;
                border-radius: 0;
                justify-content: center;
                display: flex;
                align-items: flex-start;
                border: none;
            }
            
            /* Adjust ukuran foto untuk desktop */
            .profile-photo {
                width: clamp(140px, 15vw, 180px);
                height: clamp(140px, 15vw, 180px);
            }
            
            /* Adjust font untuk desktop */
            .birth-date, .birth-age {
                font-size: clamp(0.8rem, 1vw, 0.9rem) !important;
            }
            
            .current-date {
                font-size: clamp(0.7rem, 0.9vw, 0.85rem) !important;
            }
            
            /* Hilangkan beberapa animasi yang mengganggu tata letak */
            #messageContent {
                animation: none;
            }
            
            /* Tombol hadiah tetap disembunyikan sampai pesan selesai */
            #giftBtn {
                display: none !important;
            }
            
            /* Ketika tombol hadiah muncul (diatur oleh JS) */
            #giftBtn.show {
                display: flex !important;
            }
            
            /* Styling khusus untuk hati di desktop */
            .bigHeart {
                display: block !important;
                margin: 0.5rem auto;
                font-size: clamp(2.5rem, 4vw, 3.2rem) !important;
                text-align: center;
            }
            
            /* semua elemen di kolom 3 rata tengah */
            .gift-gif-container, .btnRow {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
        }

        /* ==================== TABLET LAYOUT ==================== */
        @media (min-width: 768px) and (max-width: 1023px) {
            #messageContent {
                max-width: 90%;
                padding: 1.5rem;
            }
            
            .profile-photo {
                width: clamp(140px, 20vw, 160px);
                height: clamp(140px, 20vw, 160px);
            }
            
            /* Tablet dalam portrait mode - layout vertikal */
            @media (orientation: portrait) {
                #messageContent {
                    display: block;
                    max-width: 90%;
                }
                
                .profile-container {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    margin-bottom: 0.8rem;
                }
                
                .name-under-photo {
                    margin-top: 0.5rem;
                    font-size: clamp(1.2rem, 4vw, 1.6rem);
                    color: #ffd6f4;
                    text-shadow: 0 0 8px rgba(255, 150, 255, 0.8);
                    font-weight: bold;
                    text-align: center;
                }
                
                #timeWrapper {
                    margin-bottom: 0.8rem;
                }
                
                .gift-gif-container {
                    margin: 0.8rem auto;
                }
                
                #typedText {
                    margin-bottom: 0.8rem;
                    text-align: center;
                    font-size: clamp(0.9rem, 2.5vw, 1.2rem);
                    max-height: 300px;
                    overflow-y: auto;
                }
                
                .btnRow {
                    margin-top: 0.8rem;
                    background: transparent;
                    border: none;
                }
                
                #heartWrap {
                    text-align: center;
                    margin-top: 0.8rem;
                }
            }
            
            /* Tablet dalam landscape mode - layout horizontal sederhana */
            @media (orientation: landscape) {
                #messageContent {
                    display: flex;
                    flex-direction: column;
                    max-width: 90%;
                }
            }
        }

        /* ==================== MOBILE PORTRAIT (URUTAN DIPERBAIKI) ==================== */
        @media (max-width: 767px) {
            #messageContent {
                display: block;
                max-width: 95%;
                padding: 1.2rem;
            }
            
            /* URUTAN BARU UNTUK MOBILE: Tanggal di bawah nama */
            .profile-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-bottom: 0.8rem;
            }
            
            .name-under-photo {
                margin-top: 0.5rem;
                font-size: clamp(1.2rem, 4vw, 1.6rem);
                color: #ffd6f4;
                text-shadow: 0 0 8px rgba(255, 150, 255, 0.8);
                font-weight: bold;
                text-align: center;
                margin-bottom: 0.5rem;
            }
            
            /* Tanggal di bawah nama */
            #timeWrapper {
                margin-bottom: 0.8rem;
                margin-top: 0.5rem;
                background: transparent;
                border: none;
            }
            
            /* Judul setelah tanggal - DIPERKECIL */
            #title {
                margin-bottom: 0.8rem;
                font-size: clamp(1.5rem, 4.5vw, 2rem);
            }
            
            .gift-gif-container {
                margin: 0.8rem auto;
            }
            
            #typedText {
                margin-bottom: 0.8rem;
                text-align: center;
                font-size: clamp(0.85rem, 2.8vw, 1.1rem);
                max-height: 250px;
                overflow-y: auto;
            }
            
            #heartWrap {
                text-align: center;
                margin-top: 0.8rem;
                margin-bottom: 0.8rem;
            }
            
            .btnRow {
                margin-top: 0.8rem;
                background: transparent;
                border: none;
            }
            
            /* Atur urutan tampilan dengan order CSS */
            .profile-container { order: 1; }
            .name-under-photo { order: 2; }
            #timeWrapper { order: 3; }
            #title { order: 4; }
            .gift-gif-container { order: 5; }
            #typedText { order: 6; }
            #heartWrap { order: 7; }
            .btnRow { order: 8; }
        }

        /* PROFILE PHOTO INSIDE MESSAGE BOX */
        .profile-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .profile-photo-wrapper {
            position: relative;
            display: inline-block;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-photo-wrapper:hover {
            transform: scale(1.05);
        }

        .profile-photo-wrapper:hover .profile-photo {
            box-shadow: 0 0 40px rgba(255, 75, 209, 0.9), 0 0 60px rgba(255, 110, 200, 0.7);
            border-color: #ff00f7;
        }

        /* Hanya tampilkan tooltip di desktop */
        @media (hover: hover) and (pointer: fine) {
            .profile-photo-wrapper::after {
                content: "Klik untuk lihat Instagram ðŸ’–";
                position: absolute;
                bottom: -45px;
                left: 50%;
                transform: translateX(-50%) translateY(8px);
                background: rgba(0, 0, 0, 0.7);
                color: white;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: clamp(0.7rem, 1.8vw, 0.9rem);
                white-space: nowrap;
                opacity: 0;
                transition: all 0.3s ease;
                pointer-events: none;
                z-index: 31;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .profile-photo-wrapper:hover::after {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* FOTO DILINDUNGI DARI DOWNLOAD */
        .profile-photo {
            width: clamp(140px, 30vw, 200px);
            height: clamp(140px, 30vw, 200px);
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--pink);
            box-shadow: 0 0 30px rgba(255, 75, 209, 0.8);
            animation: photoGlow 3s infinite alternate;
            transition: all 0.3s ease;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
            pointer-events: auto;
        }

        /* Overlay transparan untuk mencegah klik kanan */
        .photo-protection {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            z-index: 30;
            pointer-events: none;
        }

        @keyframes photoGlow {
            0% {
                box-shadow: 0 0 20px rgba(255, 75, 209, 0.8);
            }
            100% {
                box-shadow: 0 0 40px rgba(255, 75, 209, 1), 0 0 60px rgba(255, 110, 200, 0.6);
            }
        }

        .photo-decoration {
            position: absolute;
            z-index: 2;
            pointer-events: none;
        }

        .photo-decoration.top {
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.8rem;
            animation: floatUp 2s infinite;
        }

        .photo-decoration.bottom {
            bottom: -18px;
            right: -12px;
            font-size: 1.3rem;
            animation: sparkleTwinkle 1.5s infinite;
        }

        /* GIF HADIAH - DIPERKECIL */
        .gift-gif-container {
            width: 100%;
            max-width: 180px;
            margin: 0.5rem auto;
            border-radius: 8px;
            overflow: hidden;
            border: none;
            box-shadow: none;
            animation: float-gif 4s ease-in-out infinite;
        }

        .gift-gif {
            width: 100%;
            height: auto;
            display: block;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }

        @keyframes float-gif {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* JUDUL DUA BARIS */
        #messageContent h1 {
            font-size: clamp(1.3rem, 5vw, 2rem);
            margin-bottom: 0.4rem;
            line-height: 1.1;
            white-space: normal;
            overflow: visible;
            text-overflow: clip;
        }

        #typedText {
            font-size: clamp(0.85rem, 3vw, 1.1rem);
            white-space: pre-line;
            line-height: 1.4;
            text-shadow: 0 0 8px #ff90ff;
            min-height: clamp(60px, 15vh, 90px);
            margin-bottom: 0.4rem;
            background: transparent;
            padding: 0.8rem;
            border-radius: 0;
            border: none;
            text-align: center;
            max-height: 250px;
            overflow-y: auto;
        }

        .bigHeart {
            font-size: clamp(2.2rem, 8vw, 3.5rem);
            display: inline-block;
            margin-top: 0.2rem;
            transform-origin: center;
            animation: beat 1.2s infinite;
            filter: drop-shadow(0 0 10px rgba(255, 80, 180, 0.85));
        }

        @keyframes beat {
            0% {
                transform: scale(1);
            }

            25% {
                transform: scale(1.1);
            }

            50% {
                transform: scale(0.95);
            }

            75% {
                transform: scale(1.06);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            60% {
                opacity: 1;
                transform: scale(1.02);
            }

            100% {
                transform: scale(1);
            }
        }

        .btnRow {
            display: flex;
            gap: clamp(0.4rem, 1.8vw, 0.8rem);
            justify-content: center;
            margin-top: 0.8rem;
            flex-wrap: wrap;
            background: transparent;
            padding: 0.8rem;
            border-radius: 0;
            border: none;
        }

        .btn {
            padding: clamp(0.4rem, 1.8vw, 0.7rem) clamp(0.9rem, 2.8vw, 1.3rem);
            background: #ff4bd1;
            border-radius: 1rem;
            color: #fff;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: clamp(0.8rem, 3vw, 1.1rem);
            min-height: 2.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            box-shadow: 0 0 10px rgba(255, 75, 209, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 75, 209, 0.4);
        }

        .btn.secondary {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.03);
        }

        /* ANIMASI TOMBOL HADIAH */
        #giftBtn {
            position: relative;
            overflow: hidden;
            background: linear-gradient(45deg, #ff4bd1, #ff29f5);
            box-shadow: 0 0 12px rgba(255, 75, 209, 0.4);
            display: none;
            align-items: center;
            justify-content: center;
        }

        #giftBtn.show {
            display: flex;
        }

        #giftBtn:hover {
            transform: translateY(-2px) scale(1.04);
            box-shadow: 0 6px 15px rgba(255, 75, 209, 0.6);
        }

        #giftBtn:active {
            transform: translateY(1px) scale(0.98);
        }

        .gift-animation {
            position: absolute;
            pointer-events: none;
            z-index: 10;
            font-size: clamp(0.9rem, 2.8vw, 1.6rem);
            animation: giftFloat 1.5s ease-out forwards;
        }

        @keyframes giftFloat {
            0% {
                transform: translateY(0) scale(0.7);
                opacity: 1;
            }
            50% {
                transform: translateY(-30px) scale(1);
                opacity: 0.9;
            }
            100% {
                transform: translateY(-60px) scale(0.4);
                opacity: 0;
            }
        }

        .confetti-btn {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: confettiBtn 1s ease-out forwards;
            pointer-events: none;
            z-index: 10;
        }

        @keyframes confettiBtn {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx, 0), var(--ty, -40px)) rotate(var(--r, 360deg));
                opacity: 0;
            }
        }

        /* TOMBOL AMBIL GIFT DI END SCREEN */
        #giftEndBtn {
            position: relative;
            overflow: hidden;
            background: linear-gradient(45deg, #ff9a3d, #ff6b6b);
            box-shadow: 0 0 12px rgba(255, 154, 61, 0.4);
        }

        #giftEndBtn:hover {
            transform: translateY(-2px) scale(1.04);
            box-shadow: 0 6px 15px rgba(255, 107, 107, 0.6);
        }

        #giftEndBtn:active {
            transform: translateY(1px) scale(0.98);
        }

        .gift-icon {
            animation: bounceGift 2s infinite;
        }

        @keyframes bounceGift {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-4px) rotate(4deg);
            }
            50% {
                transform: translateY(0) rotate(0deg);
            }
            75% {
                transform: translateY(-2px) rotate(-4deg);
            }
        }

        /* LOVE FLOATING */
        .love {
            position: fixed;
            bottom: -20px;
            pointer-events: none;
            animation: floatLove 4s linear forwards;
            will-change: transform, opacity;
            z-index: 10;
            font-size: clamp(0.7rem, 2.2vw, 1.3rem);
        }

        @keyframes floatLove {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 1;
            }

            50% {
                transform: translateY(-50vh) translateX(8vw) scale(1.1);
                opacity: 0.9;
            }

            100% {
                transform: translateY(-110vh) translateX(-6vw) scale(1.4);
                opacity: 0;
            }
        }

        .popEmoji {
            position: fixed;
            font-size: clamp(1.3rem, 4.5vw, 2.2rem);
            animation: popEmojiAnim 0.6s ease-out forwards;
            pointer-events: none;
            z-index: 10;
        }

        @keyframes popEmojiAnim {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            60% {
                transform: scale(1.3);
                opacity: 1;
            }

            100% {
                transform: scale(1);
                opacity: 0.6;
            }
        }

        /* ANIMASI BARU UNTUK DI LUAR PESAN */
        .balloon {
            position: fixed;
            bottom: -100px;
            width: clamp(18px, 5.5vw, 35px);
            height: clamp(22px, 6.5vw, 45px);
            border-radius: 50%;
            animation: floatBalloon 8s linear forwards;
            z-index: 1;
            pointer-events: none;
        }

        .balloon::after {
            content: "";
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 12px;
            background: rgba(255,255,255,0.5);
        }

        @keyframes floatBalloon {
            0% {
                transform: translateY(0) translateX(0) rotate(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-120vh) translateX(calc(var(--x-move) * 10vw)) rotate(calc(var(--x-move) * 10deg));
                opacity: 0;
            }
        }

        .bouncing-cake {
            position: fixed;
            bottom: -100px;
            font-size: clamp(1.3rem, 5.5vw, 2.7rem);
            animation: bounceCake 6s ease-in forwards;
            z-index: 10;
            pointer-events: none;
        }

        @keyframes bounceCake {
            0% {
                transform: translateY(0) scale(0.5);
                opacity: 0;
            }
            10% {
                transform: translateY(-30vh) scale(0.8);
                opacity: 1;
            }
            20% {
                transform: translateY(-15vh) scale(0.9);
            }
            30% {
                transform: translateY(-40vh) scale(1);
            }
            40% {
                transform: translateY(-25vh) scale(1.1);
            }
            50% {
                transform: translateY(-50vh) scale(1.2);
            }
            60% {
                transform: translateY(-35vh) scale(1.1);
            }
            70% {
                transform: translateY(-60vh) scale(1);
            }
            80% {
                transform: translateY(-45vh) scale(0.9);
            }
            90% {
                transform: translateY(-70vh) scale(0.8);
            }
            100% {
                transform: translateY(-100vh) scale(0.5);
                opacity: 0;
            }
        }

        .confetti {
            position: fixed;
            width: clamp(4px, 1.8vw, 8px);
            height: clamp(4px, 1.8vw, 8px);
            opacity: 0;
            animation: confettiFall 3s ease-in forwards;
            z-index: 10;
            pointer-events: none;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-10vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) rotate(720deg);
                opacity: 0;
            }
        }

        .sparkle-message {
            position: fixed;
            width: clamp(2px, 1vw, 4px);
            height: clamp(2px, 1vw, 4px);
            background: white;
            border-radius: 50%;
            animation: sparkleTwinkle 1.5s ease-in-out infinite;
            z-index: 10;
            pointer-events: none;
        }

        @keyframes sparkleTwinkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .cute-animal {
            position: fixed;
            font-size: clamp(0.9rem, 3.5vw, 1.8rem);
            bottom: -50px;
            animation: animalFloat 15s linear forwards;
            z-index: 1;
            pointer-events: none;
        }

        @keyframes animalFloat {
            0% {
                transform: translateY(0) translateX(0);
                opacity: 0.8;
            }
            100% {
                transform: translateY(-120vh) translateX(calc(var(--x-move) * 15vw));
                opacity: 0;
            }
        }

        .floating-heart {
            position: fixed;
            font-size: clamp(0.7rem, 2.8vw, 1.6rem);
            animation: floatHeart 8s linear forwards;
            z-index: 1;
            pointer-events: none;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(calc(var(--x-move) * 80px)) rotate(180deg);
                opacity: 0;
            }
        }

        /* FIREWORK CANVAS */
        #canvas {
            position: fixed;
            inset: 0;
            z-index: 5;
            display: block;
        }

        /* END SCREEN */
        #endScreen {
            position: fixed;
            inset: 0;
            display: none;
            z-index: 2000;
            background: rgba(10, 8, 20, 0.85);
            place-items: center;
            text-align: center;
            padding: clamp(0.8rem, 2.8vw, 1.5rem);
            color: #fff;
            overflow-y: auto;
        }

        #endInner {
            max-width: 90%;
            width: 90%;
            display: flex;
            flex-direction: column;
            gap: 0.4rem; /* tightened */
            /* old gap overridden */
            gap: clamp(0.8rem, 2.8vw, 1.3rem);
            align-items: center;
            background: rgba(0, 0, 0, 0.15);
            padding: 1.5rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #endScreen h2 {
            font-size: clamp(1.6rem, 6.5vw, 2.8rem);
            margin: 0;
            color: #ffd6f4;
            text-shadow: 0 0 10px rgba(255, 160, 220, 0.6);
            line-height: 1.1;
        }

        #endScreen p {
            margin: 0.15rem 0; /* tighter paragraph spacing */
            width: 100%;
            line-height: 1.4;
            color: #f3dff1;
            margin: 0;
            font-size: clamp(0.9rem, 3.2vw, 1.3rem);
        }

        /* signature absolute but won't affect layout */
        #signature {
            position: absolute;
            right: clamp(0.4rem, 1.8vw, 1.2rem);
            bottom: clamp(0.4rem, 1.8vw, 0.8rem);
            font-size: clamp(0.7rem, 2.3vw, 1.2rem);
            opacity: 0.85;
            color: #ffd6f4;
            font-style: italic;
            text-shadow: 0 0 6px rgba(255, 160, 220, 0.6);
            pointer-events: none;
        }

        /* Neon glowing date/time (base style) */
        .neonTime {
            font-weight: 700;
            letter-spacing: 0.3px;
            line-height: 1;
            color: #ffdaff;
            text-align: center;
            -webkit-text-stroke: 0.3px rgba(0, 0, 0, 0.12);
            text-shadow: 0 0 5px rgba(255, 150, 255, 0.85), 0 0 10px rgba(255, 110, 255, 0.75), 0 0 18px rgba(255, 80, 200, 0.55), 0 4px 14px rgba(0, 0, 0, 0.35);
            animation: neonPulse 2.6s ease-in-out infinite;
            transform-origin: center;
            padding: clamp(0.2rem, 0.8vw, 0.4rem) clamp(0.4rem, 1.8vw, 0.8rem);
            border-radius: 999px;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.02), rgba(255, 0, 160, 0.02));
            box-shadow: 0 4px 24px rgba(255, 60, 160, 0.06), inset 0 -1px 0 rgba(255, 255, 255, 0.02);
            display: inline-block;
            font-size: clamp(0.7rem, 2.3vw, 1.2rem);
        }

        @keyframes neonPulse {
            0% {
                transform: scale(1);
                text-shadow: 0 0 5px rgba(255, 150, 255, 0.75), 0 0 10px rgba(255, 110, 255, 0.65), 0 0 16px rgba(255, 80, 200, 0.45);
            }

            50% {
                transform: scale(1.02);
                text-shadow: 0 0 10px rgba(255, 200, 255, 0.98), 0 0 18px rgba(255, 150, 255, 0.88), 0 0 36px rgba(255, 110, 200, 0.7);
            }

            100% {
                transform: scale(1);
                text-shadow: 0 0 5px rgba(255, 150, 255, 0.75), 0 0 10px rgba(255, 110, 255, 0.65), 0 0 16px rgba(255, 80, 200, 0.45);
            }
        }

        /* smallNeon for tighter & smaller date/birth lines */
        #timeWrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 0.4rem;
            gap: 0.1rem;
            padding: 0.2rem;
            background: transparent;
            border-radius: 0;
            border: none;
            width: 90%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
        }

        .smallNeon {
            font-size: clamp(0.6rem, 2vw, 1rem);
            padding: 0.1rem 0.2rem;
            margin: 0;
            line-height: 1.05;
        }

        /* neon title with base defaults */
        .neonTitle {
            font-size: clamp(1.2rem, 5.5vw, 2rem);
            font-weight: 900;
            line-height: 1.05;
            margin: 0.1rem 0 0.3rem 0;
            color: #ffd6f4;
            text-align: center;
            transition: transform 0.45s ease, color 0.45s ease, text-shadow 0.45s ease;
            -webkit-text-stroke: 0.6px rgba(0, 0, 0, 0.12);
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 0.6rem;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.02), rgba(255, 0, 160, 0.02));
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.35);
            white-space: normal;
            overflow: visible;
            text-overflow: clip;
        }

        /* Responsive adjustments for very small screens */
        @media (max-height: 500px) {
            #messageContent {
                max-height: 85vh;
                padding: 0.6rem;
                background: transparent;
            }

            #typedText {
                min-height: 50px;
                font-size: 0.8rem;
                background: transparent;
            }

            .bigHeart {
                font-size: 1.8rem;
                margin-top: 0.1rem;
            }

            .profile-photo {
                width: 100px;
                height: 100px;
            }
            
            .gift-gif-container {
                max-width: 150px;
            }
            
            #timeWrapper {
                margin-bottom: 0.3rem;
                gap: 0.05rem;
                background: transparent;
            }
        }

        /* Landscape orientation adjustments untuk mobile */
        @media (max-width: 767px) and (orientation: landscape) {
            #startScreen h2 {
                font-size: clamp(1.1rem, 2.8vh, 1.6rem);
                margin-bottom: 0.6rem;
            }

            #openBtn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
                min-height: 2rem;
            }

            #messageContent {
                padding: 0.6rem;
                max-height: 85vh;
                background: transparent;
            }

            #typedText {
                min-height: 40px;
                font-size: 0.8rem;
                background: transparent;
            }

            .profile-photo {
                width: 90px;
                height: 90px;
            }
            
            .gift-gif-container {
                max-width: 140px;
            }
            
            #timeWrapper {
                margin-bottom: 0.3rem;
                gap: 0.05rem;
                padding: 0.15rem;
                background: transparent;
            }
        }

        /* Very large screens */
        @media (min-width: 1600px) {
            #messageContent {
                max-width: 1400px;
                padding: 2rem;
                background: transparent;
            }

            #startScreen h2 {
                font-size: 2.2rem;
            }

            #openBtn {
                font-size: 1.8rem;
                padding: 1.2rem 2.5rem;
            }
            
            .profile-photo {
                width: 200px;
                height: 200px;
            }
            
            .gift-gif-container {
                max-width: 220px;
            }
            
            #timeWrapper {
                margin-bottom: 0.5rem;
                gap: 0.15rem;
                padding: 0.3rem;
                background: transparent;
            }
        }

        /* Responsive untuk foto besar */
        @media (max-width: 768px) {
            .profile-photo {
                width: clamp(120px, 28vw, 160px);
                height: clamp(120px, 28vw, 160px);
            }
            
            .gift-gif-container {
                max-width: 160px;
            }
            
            #timeWrapper {
                margin-bottom: 0.3rem;
                gap: 0.08rem;
                padding: 0.15rem;
                background: transparent;
            }
        }

        @media (max-width: 480px) {
            .profile-photo {
                width: clamp(110px, 25vw, 140px);
                height: clamp(110px, 25vw, 140px);
            }
            
            .gift-gif-container {
                max-width: 140px;
            }
            
            #timeWrapper {
                margin-bottom: 0.2rem;
                gap: 0.05rem;
                padding: 0.1rem;
                width: 95%;
                background: transparent;
            }
        }

        /* ----- Cute Loading Overlay ----- */
        #
        #
        #

        /* whisper messages */
        .whisperMsg {
            position: absolute;
            pointer-events: none;
            font-size: clamp(0.7rem, 2.3vw, 1rem);
            padding: 0.3rem 0.5rem;
            border-radius: 999px;
            background: rgba(255,255,255,0.08);
            color: #fff;
            transform: translateY(0);
            opacity: 0;
            transition: transform 600ms cubic-bezier(.2,.9,.3,1), opacity 600ms;
            box-shadow: 0 4px 14px rgba(0,0,0,0.35);
        }

        /* sakura petals */
        .sakura-petal {
            position: fixed;
            font-size: clamp(10px, 2.8vw, 22px);
            will-change: transform, opacity;
            z-index: 2500;
            pointer-events: none;
            opacity: 0.95;
            transform: translate3d(0,0,0);
        }

        /* tiny bunny hop */
        .tiny-bunny {
            position: fixed;
            bottom: 6vh;
            left: -80px;
            font-size: clamp(18px, 5vw, 42px);
            z-index: 1500;
            pointer-events: none;
            transform-origin: center;
            animation: bunnyHop 3.6s ease-in-out infinite;
        }
        @keyframes bunnyHop {
            0%   { transform: translateX(0) translateY(0) rotate(0); }
            25%  { transform: translateX(25vw) translateY(-24px) rotate(-5deg); }
            50%  { transform: translateX(50vw) translateY(0) rotate(0); }
            75%  { transform: translateX(75vw) translateY(-18px) rotate(5deg); }
            100% { transform: translateX(110vw) translateY(0) rotate(0); }
        }

        /* shine on buttons */
        .btn.shine {
            position: relative;
            overflow: hidden;
        }
        .btn.shine::after {
            content: "";
            position: absolute;
            top: -40%;
            left: -45%;
            width: 30%;
            height: 180%;
            background: linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.45), rgba(255,255,255,0.05));
            transform: rotate(25deg) translateX(-120%);
            transition: transform 0.9s ease;
            pointer-events: none;
        }
        .btn.shine:hover::after,
        .btn.shine.active-shine::after {
            transform: rotate(25deg) translateX(220%);
            transition: transform 0.9s cubic-bezier(.2,.9,.3,1);
        }

        /* gift explosion emoji bigger */
        .gift-explode {
            position: fixed;
            font-size: clamp(18px, 4.5vw, 32px);
            pointer-events: none;
            z-index: 4000;
            transform-origin: center;
            will-change: transform, opacity;
            animation: giftFloatUp 1200ms ease-out forwards;
        }
        @keyframes giftFloatUp {
            0%   { transform: translateY(0) scale(0.8); opacity: 1; }
            60%  { transform: translateY(-50px) scale(1.1); opacity: 0.95; }
            100% { transform: translateY(-100px) scale(0.6); opacity: 0; }
        }
        
        /* TATA LETAK TANGGAL LAHIR DAN USIA */
        .date-age-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 0.2rem;
            gap: 0.05rem;
            width: 100%;
        }
        
        .birth-date {
            font-size: clamp(0.85rem, 2.5vw, 1.2rem) !important;
            font-weight: bold;
            color: #ffd6f4;
            text-shadow: 0 0 6px rgba(255, 150, 255, 0.8);
            margin: 0;
            padding: 0.1rem 0.3rem;
            line-height: 1.1;
        }
        
        .birth-age {
            font-size: clamp(0.75rem, 2.2vw, 1.1rem) !important;
            color: #ffb3f5;
            text-shadow: 0 0 5px rgba(255, 120, 255, 0.7);
            margin: 0;
            padding: 0.1rem 0.3rem;
            line-height: 1.1;
        }
        
        .current-date {
            font-size: clamp(0.65rem, 1.8vw, 1rem) !important;
            color: #ffdaff;
            margin: 0;
            padding: 0.15rem 0.4rem;
            line-height: 1.1;
            background: transparent;   
            border: none;               
            box-shadow: none;
        }
        
        /* Untuk layar sangat kecil, buat satu baris */
        @media (max-width: 380px) {
            .date-age-container {
                flex-direction: column;
                gap: 0.02rem;
            }
            
            .birth-date, .birth-age {
                font-size: clamp(0.7rem, 2vw, 0.9rem) !important;
                padding: 0.05rem 0.2rem;
            }
            
            .current-date {
                font-size: clamp(0.6rem, 1.6vw, 0.85rem) !important;
                padding: 0.08rem 0.25rem;
                background: rgba(255, 255, 255, 0.04);
            }
        }
        
        /* CSS untuk mencegah download */
        .no-download {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }
    
/* ================= FORCE NO SCROLL ================= */
@media (min-width:1024px){
  #messageBox{
    align-items:flex-start !important;
    overflow: visible !important;
  }

  #messageContent{
    height:auto !important;
    max-height:none !important;
    overflow:visible !important;
  }

  #typedText{
    height:auto !important;
    min-height:auto !important;
    max-height:none !important;
    overflow:visible !important;
    display:block !important;
  }

  /* kill any internal scrollbar */
  #typedText::-webkit-scrollbar,
  #messageContent::-webkit-scrollbar{
    display:none;
  }
}
/* ================================================================ */


/* ================= FORCE NO SCROLL ================= */
@media (min-width:1024px){
  #messageBox{
    align-items:flex-start !important;
    overflow: visible !important;
  }

  #messageContent{
    height:auto !important;
    max-height:none !important;
    overflow:visible !important;
  }

  #typedText{
    height:auto !important;
    min-height:auto !important;
    max-height:none !important;
    overflow:visible !important;
    display:block !important;
  }

  #typedText::-webkit-scrollbar,
  #messageContent::-webkit-scrollbar{
    display:none;
  }
}
/* ================================================================ */


/* ================= POSTER AUTO-SCALE MODE ================= */
@media (min-width:1024px){
  body{
    overflow:hidden;
  }

  #messageBox{
    align-items:center !important;
    justify-content:center !important;
  }

  #messageContent{
    transform-origin: center center;
    scale: min(
      calc(100vw / 1400),
      calc(100vh / 900),
      1
    );
  }
}
/* ========================================================== */


/* ===== FORCE SINGLE LINE INFO (DESKTOP 100%) ===== */
@media (min-width:1024px){
  #timeWrapper{
    flex-wrap: nowrap !important;   
    white-space: nowrap;
    gap: 1rem;
  }

  .date-age-container{
    flex-wrap: nowrap !important;
    white-space: nowrap;
  }

  .birth-date,
  .birth-age,
  .current-date{
    font-size: clamp(0.7rem, 0.9vw, 0.85rem) !important;
    line-height: 1.1;
    white-space: nowrap;
  }
}
/* =============================================== */


/* ===== WHISPER FLOATING MESSAGE ===== */
#whisperContainer{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  overflow: hidden;
}
.whisper-float{
  position: absolute;
  left: 50%;
  bottom: 15%;
  transform: translateX(-50%);
  color: rgba(255,255,255,0.9);
  font-size: clamp(0.85rem, 1.2vw, 1.05rem);
  font-family: 'Poppins', sans-serif;
  text-align: center;
  white-space: nowrap;
  opacity: 0;
  filter: blur(2px);
  animation: whisperFloat 6s ease-out forwards;
  text-shadow: 0 0 10px rgba(255,180,255,0.6);
}
@keyframes whisperFloat{
  0%{opacity:0;transform:translate(-50%,20px) scale(.95);filter:blur(3px)}
  20%{opacity:1;filter:blur(0)}
  100%{opacity:0;transform:translate(-50%,-120px) scale(1.05);filter:blur(2px)}
}
/* ================================== */


/* ===== EXTRA CUTE FLOATING ANIMATIONS ===== */
.cute-layer{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:5000;
}

.cute-item{
  position:absolute;
  font-size:22px;
  animation: cuteFloat linear forwards;
  opacity:0.9;
}

@keyframes cuteFloat{
  from{
    transform:translateY(20px) scale(0.8);
    opacity:0;
  }
  10%{opacity:1;}
  to{
    transform:translateY(-120vh) scale(1.2);
    opacity:0;
  }
}
/* ======================================== */


/* ===== COUNTDOWN BLACK SCREEN ===== */
#countdownOverlay{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:99999;
}
#countdownNumber{
  font-size:clamp(4rem,12vw,9rem);
  color:#fff;
  animation:countPop 1s ease-in-out;
}
@keyframes countPop{
  0%{transform:scale(.4);opacity:0}
  60%{transform:scale(1.25);opacity:1}
  100%{transform:scale(1);opacity:1}
}
/* ================================ */


/* ===== CUTE COUNTDOWN ANIMATIONS ===== */
.countdown-cute{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.cute-pop{
  position:absolute;
  font-size:24px;
  animation: cutePop 1.6s ease-out forwards;
  opacity:0;
}
@keyframes cutePop{
  0%{transform:translateY(0) scale(.6);opacity:0}
  20%{opacity:1}
  100%{transform:translateY(-120px) scale(1.3);opacity:0}
}
/* =================================== */


/* ===== LOVE EXPLOSION AT ZERO ===== */
.love-burst{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  pointer-events:none;
  z-index:100000;
}
.love-burst span{
  position:absolute;
  font-size:28px;
  animation:loveExplode 1.6s ease-out forwards;
}
@keyframes loveExplode{
  0%{transform:translate(0,0) scale(.5);opacity:1}
  100%{transform:translate(var(--x),var(--y)) scale(1.3);opacity:0}
}
/* ================================= */


/* ===== SIGNATURE (FORCED VISIBLE) ===== */
#signature{
  position:fixed !important;
  right:18px !important;
  bottom:14px !important;
  font-size:18px;              /* bigger */
  font-weight:500;
  color:#ffffff;
  opacity:0.95;
  font-style:italic;           /* miring */
  transform: rotate(-6deg);    /* sedikit miring */
  text-shadow:
    0 0 6px rgba(255,180,255,0.9),
    0 0 14px rgba(255,120,220,0.6);
  pointer-events:none;
  z-index:2147483647;
}


.typing-cursor::after{
  content:"â–‹";
  margin-left:4px;
  animation:blink 1s infinite;
}
@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:0}}

/* Smooth rainbow glow for title & button */
#startScreen h2{
  font-size: clamp(1.5rem, 5vw, 2.2rem);
  color:#fff;
  text-shadow:0 0 10px #ff00f7;
  margin-bottom:0.8rem;
  animation: floatUp 2s infinite;
}

#openBtn{
  padding: clamp(0.6rem, 2.5vw, 1rem) clamp(1.2rem, 5vw, 2rem);
  font-size: clamp(1.2rem, 4vw, 1.8rem);
  border-radius: 2rem;
  border: none;
  background: var(--pink-dark);
  color:#fff;
  cursor:pointer;
  box-shadow:0 0 15px #ff00ea;
  animation:pulse 1.5s infinite;
  transition:all 0.3s ease;
  position:relative;
  z-index:10;
  min-height:3rem;
}


  to{filter:hue-rotate(360deg)}
}

</style>


<style>
/* ===== HARD FIX: TITLE BACKGROUND TRANSPARENT (MATCH MESSAGE CONTENT) ===== */
.neonTitle{
  background: transparent !important;
}

.neonTitle::before,
.neonTitle::after{
  display:none !important;
}

.neonTitle,
.neonTitle *{
  backdrop-filter:none !important;
  -webkit-backdrop-filter:none !important;
  filter:none !important;
  box-shadow:none !important;
}

/* if parent container has blur, kill it */
.neonTitleParent,
.neonTitleWrapper,
.titleBox,
.title-container,
.header-title,
#titleContainer,
[class*="title"]{
  background: transparent !important;
  backdrop-filter:none !important;
  -webkit-backdrop-filter:none !important;
  filter:none !important;
  box-shadow:none !important;
}
</style>

<style>
/* ===== FIREWORK VISIBILITY FIX ===== */
#canvas{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  z-index:0; /* behind content */
  pointer-events:none;
  display:block !important;
}
</style>


<style>
/* ===== ROCKET FIREWORK CANVAS ===== */
#rocketCanvas{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  z-index: 1;           /* behind UI, above background */
  pointer-events: none;
}
</style>

</head>

<body>
    <!-- AUDIO (do not autoplay on load) -->
    <audio id="bgm" src="https://bit.ly/4pyMi6i" loop></audio>

    <!-- START -->
    <div id="startScreen" aria-modal="true" role="dialog">
        <h2>
          ðŸŽ€
          <span class="dancing-text">Ada</span>
          Sesuatu
          <span class="dancing-text">Untuk</span>
        <span class="dancing-text">Wulan</span> 
        ðŸŽ€</h2>
        <button id="openBtn">ðŸ’Œ Buka</button>
    </div>

    <!-- MESSAGE -->
    <div id="messageBox" aria-hidden="true">
        <div id="messageContent" role="document" aria-labelledby="title">
            <!-- KOLOM 1: Foto, nama, tanggal, dan hati -->
            <div class="profile-container">
                <div class="profile-photo-wrapper" id="profilePhotoWrapper">
                    <img src="https://bit.ly/4j4MtEq" 
                         alt="Foto Si Cantik" class="profile-photo no-download">
                    <div class="photo-decoration top">ðŸŽ€</div>
                    <div class="photo-decoration bottom">âœ¨</div>
                    <!-- Overlay transparan untuk mencegah klik kanan -->
                    <div class="photo-protection"></div>
                </div>
            </div>

            <!-- Nama Wulan di bawah foto -->
            <div class="name-under-photo">Wulan Ayu D.W.</div>

            <!-- Tanggal lahir dan usia - UNTUK MOBILE DITAMPILKAN DI BAWAH NAMA -->
            <div id="timeWrapper">
                <div class="date-age-container">
                    <p id="birthDate" class="birth-date" aria-live="polite"></p>
                    <p id="ageInfo" class="birth-age" aria-live="polite"></p>
                </div>
                <p id="currentDateTime" class="current-date" aria-live="polite"></p>
            </div>

            <!-- KOLOM 2: Judul dan isi pesan -->
            <h1 id="title" class="neonTitle" role="heading" aria-live="polite">
                ðŸŽ‰ Otanjoubi Omedetou ðŸŽ‰
            </h1>

            <!-- KOLOM 3: GIF hadiah dan tombol hadiah -->
            <div class="gift-gif-container">
                <img src="https://github.com/bobby175/my-porto/raw/main/mlbb-jjk-jjk-mlbb.gif" 
                     alt="JJK Gift" class="gift-gif no-download">
            </div>

            <!-- Isi pesan yang akan diketik -->
            <div id="typedText" aria-live="polite"></div>

            <!-- Detak hati -->
            <div id="heartWrap">
                <span class="bigHeart" aria-hidden="true">â¤ï¸</span>
            </div>

            <!-- Tombol hadiah -->
            <div class="btnRow" style="margin-top:12px;">
                <button id="giftBtn" class="btn"><span class="gift-icon">ðŸŽ</span> Ada Hadiah Disini!</button>
            </div>
        </div>
    </div>

    <!-- END -->
    <div id="endScreen" role="dialog" aria-modal="true">
        


<div id="endInner">
    <h2>Terima kasih telah membuka pesannya ðŸŽ€</h2>

    <p class="typing-line"></p>
    <p class="typing-line"></p>
    <p class="typing-line"></p>
    <p class="typing-line"></p>
    <p class="typing-line"></p>
    <p class="typing-line"></p>

    <p class="hint">
        Disarankan ngambilnya buka lewat chrome di hp ,
        tapi kalau mau lihat tampilannya di rekomdasiin pakai laptop hehehe
    </p>

    <div class="btnRow">
        <button id="replayBtn" class="btn">ðŸ”„ Mainkan Lagi</button>
        <button id="giftEndBtn" class="btn">
            <span class="gift-icon">ðŸŽ</span> Ambil Gift
        </button>
    </div>
</div>


        </div>


        </div>

        </div>

        <!-- signature -->
        <div id="signature"> from A.M.</div>
    </div>

    <!-- CANVAS FIREWORK -->
    <canvas id="canvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            /* ----------------------------
               Birth + Current Date/Time (detailed age)
               ---------------------------- */

            // compute years, months, days difference accurately
            function computeAgeDetailed(birthDate, now) {
                // start with whole differences
                let years = now.getFullYear() - birthDate.getFullYear();
                let months = now.getMonth() - birthDate.getMonth();
                let days = now.getDate() - birthDate.getDate();

                if (days < 0) {
                    // borrow days from previous month
                    const prevMonth = new Date(now.getFullYear(), now.getMonth(), 0); // last day of previous month
                    days += prevMonth.getDate();
                    months -= 1;
                }
                if (months < 0) {
                    months += 12;
                    years -= 1;
                }

                return { years, months, days };
            }

            function updateBirthInfo() {
                const birthDate = new Date(2004, 0, 1); // 01 Januari 2004
                const now = new Date();

                const daysName = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
                const birthDayName = daysName[birthDate.getDay()];

                const age = computeAgeDetailed(birthDate, now);

                const birthString = `${birthDayName}, 01 - 01 - 2004`;

                const parts = [];
                if (age.years) parts.push(`${age.years} Tahun`);
                if (age.months) parts.push(`${age.months} Bulan`);
                if (age.days || parts.length === 0) parts.push(`${age.days} Hari`);

                // Tampilkan tanggal lahir di elemen #birthDate
                document.getElementById("birthDate").innerText = `ðŸ“… Lahir: ${birthString}`;
                // Tampilkan usia di elemen #ageInfo
                document.getElementById("ageInfo").innerText = `ðŸŽ‚ Usia: ${parts.join(' ')}`;
            }

            function updateDateTime() {
                const dt = new Date();

                const daysName = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
                const dayName = daysName[dt.getDay()];

                const day = String(dt.getDate()).padStart(2, '0');
                const month = String(dt.getMonth() + 1).padStart(2, '0');
                const year = dt.getFullYear();

                const time = dt.toLocaleTimeString("id-ID", {
                    hour: "2-digit",
                    minute: "2-digit",
                    second: "2-digit"
                });

                document.getElementById("currentDateTime").innerText =
                    `ðŸ“… ${dayName}, ${day} - ${month} - ${year} â€” ðŸ• ${time}`;

                updateBirthInfo();
            }

            // initial + intervals
            updateBirthInfo();
            updateDateTime();
            const dtInterval = setInterval(updateDateTime, 1000);

            /* ----------------------------
               Elements & UI behavior
               ---------------------------- */
            const startScreen = document.getElementById("startScreen");
            const openBtn = document.getElementById("openBtn");
            const bgm = document.getElementById("bgm");
            const messageBox = document.getElementById("messageBox");
            const typedText = document.getElementById("typedText");
            const giftBtn = document.getElementById("giftBtn");
            const endScreen = document.getElementById("endScreen");
            const replayBtn = document.getElementById("replayBtn");
            const giftEndBtn = document.getElementById("giftEndBtn");
            const profilePhotoWrapper = document.getElementById("profilePhotoWrapper");
            const profilePhoto = document.querySelector('.profile-photo');
            const giftGif = document.querySelector('.gift-gif');

            // Instagram URL
            const instagramUrl = "https://www.instagram.com/wulan_chaaan_?igsh=MWVkMXlvbm9pNnA0cw==";

            // initial explicit states (guard against CSS/JS race)
            startScreen.style.display = "flex";
            messageBox.style.display = "none";
            endScreen.style.display = "none";
            giftBtn.style.display = "none";
            typedText.textContent = "";

            let heartInterval = null;
            let emojiInterval = null;
            let balloonInterval = null;
            let cakeInterval = null;
            let confettiInterval = null;
            let sparkleInterval = null;
            let animalInterval = null;
            let floatingHeartInterval = null;
            let i = 0;
            let typingTimeout = null;

            /* ----------------------------
               MENCEGAH DOWNLOAD GAMBAR
               ---------------------------- */
            
            // Fungsi untuk mencegah konteks menu (klik kanan) pada gambar
            function preventImageDownload() {
                // Mencegah klik kanan pada gambar profil
                if (profilePhoto) {
                    profilePhoto.addEventListener('contextmenu', function(e) {
                        e.preventDefault();
                        showNoDownloadMessage();
                        return false;
                    });
                    
                    // Mencegah drag and drop gambar
                    profilePhoto.addEventListener('dragstart', function(e) {
                        e.preventDefault();
                        return false;
                    });
                    
                    // Tambahkan atribut untuk mencegah drag
                    profilePhoto.setAttribute('draggable', 'false');
                }
                
                // Mencegah klik kanan pada GIF
                if (giftGif) {
                    giftGif.addEventListener('contextmenu', function(e) {
                        e.preventDefault();
                        showNoDownloadMessage();
                        return false;
                    });
                    
                    giftGif.addEventListener('dragstart', function(e) {
                        e.preventDefault();
                        return false;
                    });
                    
                    giftGif.setAttribute('draggable', 'false');
                }
                
                // Mencegah klik kanan di seluruh halaman untuk keamanan tambahan
                document.addEventListener('contextmenu', function(e) {
                    // Jika yang diklik adalah gambar atau dalam container gambar
                    if (e.target.tagName === 'IMG' || 
                        e.target.classList.contains('profile-photo-wrapper') ||
                        e.target.classList.contains('gift-gif-container')) {
                        e.preventDefault();
                        showNoDownloadMessage();
                        return false;
                    }
                });
                
                // Mencegah keyboard shortcut untuk save (Ctrl+S, Cmd+S)
                document.addEventListener('keydown', function(e) {
                    // Ctrl+S atau Cmd+S
                    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                        e.preventDefault();
                        showNoDownloadMessage();
                        return false;
                    }
                    
                    // Print Screen
                    if (e.key === 'PrintScreen') {
                        // Tidak bisa benar-benar mencegah Print Screen, tapi bisa beri pesan
                        showNoDownloadMessage();
                    }
                });
            }
            
            // Pesan ketika mencoba download
            function showNoDownloadMessage() {
                // Buat elemen pesan sementara
                const message = document.createElement('div');
                message.innerHTML = 'âŒ Foto tidak bisa didownload!';
                message.style.position = 'fixed';
                message.style.top = '50%';
                message.style.left = '50%';
                message.style.transform = 'translate(-50%, -50%)';
                message.style.background = 'rgba(0, 0, 0, 0.8)';
                message.style.color = '#ff6b6b';
                message.style.padding = '15px 25px';
                message.style.borderRadius = '10px';
                message.style.zIndex = '9999';
                message.style.fontSize = '1.2rem';
                message.style.fontWeight = 'bold';
                message.style.boxShadow = '0 0 20px rgba(255, 0, 0, 0.5)';
                message.style.animation = 'fadeInOut 2s forwards';
                
                // Tambahkan animasi
                const style = document.createElement('style');
                style.innerHTML = `
                    @keyframes fadeInOut {
                        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                        20% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
                        40% { transform: translate(-50%, -50%) scale(1); }
                        80% { opacity: 1; }
                        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
                    }
                `;
                document.head.appendChild(style);
                
                document.body.appendChild(message);
                
                // Hapus pesan setelah 2 detik
                setTimeout(() => {
                    if (message.parentNode) {
                        message.parentNode.removeChild(message);
                    }
                    if (style.parentNode) {
                        style.parentNode.removeChild(style);
                    }
                }, 2000);
            }
            
            // Jalankan fungsi pencegahan download
            preventImageDownload();

            // Fungsi untuk membuka Instagram
            function openInstagram() {
                // Efek visual sebelum membuka
                createInstagramClickEffect();
                
                // Tunggu sebentar untuk efek visual
                setTimeout(() => {
                    window.open(instagramUrl, '_blank');
                }, 300);
            }

            // Efek visual ketika foto diklik (disesuaikan untuk foto besar)
            function createInstagramClickEffect() {
                // Efek glow lebih terang untuk foto besar
                const originalBoxShadow = profilePhoto.style.boxShadow;
                profilePhoto.style.boxShadow = '0 0 50px rgba(255, 75, 209, 1), 0 0 80px rgba(255, 110, 200, 0.8)';
                profilePhoto.style.transform = 'scale(1.1)';
                profilePhoto.style.borderColor = '#ff00f7';
                
                // Reset setelah beberapa saat
                setTimeout(() => {
                    profilePhoto.style.boxShadow = originalBoxShadow;
                    profilePhoto.style.transform = 'scale(1)';
                    profilePhoto.style.borderColor = 'var(--pink)';
                }, 400);
                
                // Efek partikel hati kecil lebih banyak
                const rect = profilePhoto.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                for (let i = 0; i < 8; i++) {
                    const heart = document.createElement('div');
                    heart.innerHTML = 'ðŸ’–';
                    heart.style.position = 'fixed';
                    heart.style.left = centerX + 'px';
                    heart.style.top = centerY + 'px';
                    heart.style.fontSize = '18px';
                    heart.style.zIndex = '9998';
                    heart.style.pointerEvents = 'none';
                    document.body.appendChild(heart);
                    
                    // Animasi partikel dengan jarak lebih jauh
                    const angle = Math.random() * Math.PI * 2;
                    const distance = 30 + Math.random() * 40;
                    const duration = 400 + Math.random() * 200;
                    
                    heart.animate([
                        { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                        { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0)`, opacity: 0 }
                    ], {
                        duration: duration,
                        easing: 'cubic-bezier(0.2, 0.8, 0.3, 1)'
                    });
                    
                    setTimeout(() => {
                        heart.remove();
                    }, duration);
                }
            }

            // Event listener untuk klik foto (hanya kiri untuk Instagram)
            profilePhotoWrapper.addEventListener('click', openInstagram);
            profilePhoto.addEventListener('click', openInstagram);

            // ANIMASI CUTE UNTUK MENU AWAL
            function startMenuAnimations() {
                // Hati berloncatan
                setInterval(() => {
                    const heart = document.createElement("div");
                    heart.className = "bouncing-heart";
                    heart.innerHTML = "ðŸ’–";
                    heart.style.left = Math.random() * 90 + 5 + "vw";
                    heart.style.top = Math.random() * 70 + 15 + "vh";
                    heart.style.animationDelay = Math.random() * 2 + "s";
                    startScreen.appendChild(heart);

                    setTimeout(() => {
                        heart.remove();
                    }, 4000);
                }, 800);

                // Bintang berjatuhan
                setInterval(() => {
                    const star = document.createElement("div");
                    star.className = "floating-star";
                    star.innerHTML = "âœ¨";
                    star.style.left = Math.random() * 100 + "vw";
                    star.style.setProperty('--x-move', (Math.random() * 2 - 1).toFixed(2));
                    startScreen.appendChild(star);

                    setTimeout(() => {
                        star.remove();
                    }, 6000);
                }, 500);

                // Titik berkilauan
                setInterval(() => {
                    const sparkle = document.createElement("div");
                    sparkle.className = "sparkle-dot";
                    sparkle.style.left = Math.random() * 100 + "vw";
                    sparkle.style.top = Math.random() * 100 + "vh";
                    startScreen.appendChild(sparkle);

                    setTimeout(() => {
                        sparkle.remove();
                    }, 2000);
                }, 300);

                // Kelinci lucu
                setInterval(() => {
                    const bunny = document.createElement("div");
                    bunny.className = "cute-bunny";
                    bunny.innerHTML = "ðŸ°";
                    bunny.style.bottom = "10%";
                    bunny.style.left = "-50px";
                    startScreen.appendChild(bunny);

                    setTimeout(() => {
                        bunny.remove();
                    }, 8000);
                }, 10000);

                // Kue mengambang
                setInterval(() => {
                    const cake = document.createElement("div");
                    cake.className = "floating-cake";
                    cake.innerHTML = "ðŸŽ‚";
                    cake.style.left = Math.random() * 80 + 10 + "vw";
                    cake.style.bottom = "10%";
                    startScreen.appendChild(cake);

                    setTimeout(() => {
                        cake.remove();
                    }, 10000);
                }, 5000);

                // Gelembung
                setInterval(() => {
                    const bubble = document.createElement("div");
                    bubble.className = "bubble";
                    bubble.style.left = Math.random() * 100 + "vw";
                    bubble.style.bottom = "0%";
                    startScreen.appendChild(bubble);

                    setTimeout(() => {
                        bubble.remove();
                    }, 8000);
                }, 1500);

                // Hadiah berputar
                setInterval(() => {
                    const gift = document.createElement("div");
                    gift.className = "rotating-gift";
                    gift.innerHTML = "ðŸŽ";
                    gift.style.left = Math.random() * 90 + 5 + "vw";
                    gift.style.top = Math.random() * 80 + 10 + "vh";
                    startScreen.appendChild(gift);

                    setTimeout(() => {
                        gift.remove();
                    }, 5000);
                }, 3000);
            }

            // Jalankan animasi menu awal
            startMenuAnimations();

            // start experience - only via click
            openBtn.addEventListener("click", startExperience);

            function startExperience() {
                // hide start, show message
                startScreen.style.display = "none";
                messageBox.style.display = "flex";
                messageBox.setAttribute('aria-hidden', 'false');

                // bgm will start after loading finishes (handled by loading sequence)

                // reset typing state
                typedText.textContent = "";
                i = 0;
                giftBtn.style.display = "none";
                giftBtn.classList.remove("show");
                typeMessage();

                // spawn semua animasi
                if (heartInterval) clearInterval(heartInterval);
                if (emojiInterval) clearInterval(emojiInterval);
                if (balloonInterval) clearInterval(balloonInterval);
                if (cakeInterval) clearInterval(cakeInterval);
                if (confettiInterval) clearInterval(confettiInterval);
                if (sparkleInterval) clearInterval(sparkleInterval);
                if (animalInterval) clearInterval(animalInterval);
                if (floatingHeartInterval) clearInterval(floatingHeartInterval);

                // Animasi di dalam pesan (sebelumnya)
                heartInterval = setInterval(spawnLove, 450);
                emojiInterval = setInterval(spawnEmoji, 1200);

                // Animasi baru di luar pesan
                balloonInterval = setInterval(spawnBalloon, 800);
                cakeInterval = setInterval(spawnCake, 3000);
                confettiInterval = setInterval(spawnConfetti, 200);
                sparkleInterval = setInterval(spawnSparkle, 100);
                animalInterval = setInterval(spawnAnimal, 2000);
                floatingHeartInterval = setInterval(spawnFloatingHeart, 600);
            }

            /* Typing effect - DIPERCEPAT */
            const message =
                `Selamat Ulang Tahun Wulan! ðŸŽ‰

Semoga dihari spesial ini
penuh dengan kebahagiaan, tawa,
dan cinta dari orang-orang terdekat. ðŸ˜„

Mudah-mudahan tahun ini
membawa lebih banyak kesuksesan,
kesehatan, dan impian yang tercapai. ðŸŒŸ

Dari hati ke hati,
Otanjoubi omedetou! ðŸŽ‚â¤ï¸
Dan Selamat Tahun Baru ðŸŽ‰`;

            function typeMessage() {
                if (i < message.length) {
                    typedText.textContent += message.charAt(i);
                    i++;
                    // DIPERCEPAT: dari 15ms menjadi 12ms
                    typingTimeout = setTimeout(typeMessage, 12);
                } else {
                    // selesai mengetik -> tampilkan tombol Hadiah
                    giftBtn.style.display = "flex";
                    giftBtn.classList.add("show");
                    giftBtn.focus();
                    
                    // Untuk desktop, pastikan tombol muncul
                    if (window.innerWidth >= 1024) {
                        giftBtn.style.display = "flex !important";
                    }
                }
            }

            /* Animasi tombol hadiah - DIPERKECIL */
            function createGiftAnimation(event) {
                const btnRect = giftBtn.getBoundingClientRect();
                const btnX = btnRect.left + btnRect.width / 2;
                const btnY = btnRect.top + btnRect.height / 2;

                // Animasi emoji hadiah - DIPERKECIL
                for (let i = 0; i < 4; i++) {
                    setTimeout(() => {
                        const gift = document.createElement("div");
                        gift.className = "gift-animation";
                        gift.innerHTML = "ðŸŽ";
                        gift.style.left = btnX + "px";
                        gift.style.top = btnY + "px";
                        document.body.appendChild(gift);

                        setTimeout(() => {
                            gift.remove();
                        }, 1500);
                    }, i * 80);
                }

                // Animasi confetti - DIPERKECIL
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement("div");
                        confetti.className = "confetti-btn";
                        const colors = ["#ff6b6b", "#4ecdc4", "#45b7d1", "#96ceb4", "#feca57", "#ff9ff3", "#54a0ff", "#5f27cd"];
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.left = btnX + "px";
                        confetti.style.top = btnY + "px";
                        confetti.style.setProperty('--tx', (Math.random() * 80 - 40) + 'px');
                        confetti.style.setProperty('--ty', (Math.random() * -60 - 15) + 'px');
                        confetti.style.setProperty('--r', (Math.random() * 720) + 'deg');
                        document.body.appendChild(confetti);

                        setTimeout(() => {
                            confetti.remove();
                        }, 1000);
                    }, i * 40);
                }
            }

            /* Animasi tombol hadiah di end screen - DIPERKECIL */
            function createGiftEndAnimation(event) {
                const btnRect = giftEndBtn.getBoundingClientRect();
                const btnX = btnRect.left + btnRect.width / 2;
                const btnY = btnRect.top + btnRect.height / 2;

                // Animasi emoji hadiah - DIPERKECIL
                for (let i = 0; i < 6; i++) {
                    setTimeout(() => {
                        const gift = document.createElement("div");
                        gift.className = "gift-animation";
                        gift.innerHTML = "ðŸŽ";
                        gift.style.left = btnX + "px";
                        gift.style.top = btnY + "px";
                        document.body.appendChild(gift);

                        setTimeout(() => {
                            gift.remove();
                        }, 1500);
                    }, i * 80);
                }

                // Animasi confetti - DIPERKECIL
                for (let i = 0; i < 22; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement("div");
                        confetti.className = "confetti-btn";
                        const colors = ["#ff6b6b", "#4ecdc4", "#45b7d1", "#96ceb4", "#feca57", "#ff9ff3", "#54a0ff", "#5f27cd"];
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.left = btnX + "px";
                        confetti.style.top = btnY + "px";
                        confetti.style.setProperty('--tx', (Math.random() * 120 - 60) + 'px');
                        confetti.style.setProperty('--ty', (Math.random() * -80 - 25) + 'px');
                        confetti.style.setProperty('--r', (Math.random() * 720) + 'deg');
                        document.body.appendChild(confetti);

                        setTimeout(() => {
                            confetti.remove();
                        }, 1000);
                    }, i * 40);
                }
            }

            /* Love animation - DIPERKECIL */
            function spawnLove() {
                const love = document.createElement("div");
                love.className = "love";
                const sizes = [16, 20, 24, 28, 32];
                const colors = ["â¤ï¸", "ðŸ’–", "ðŸ’•", "ðŸ’˜", "ðŸ’ž"];
                love.innerHTML = colors[Math.floor(Math.random() * colors.length)];
                const left = Math.random() * 100;
                love.style.left = `${left}vw`;
                love.style.fontSize = `${sizes[Math.floor(Math.random() * sizes.length)]}px`;
                love.style.opacity = (0.7 + Math.random() * 0.3).toString();
                const dur = 3000 + Math.random() * 2000;
                love.style.animationDuration = dur + "ms";

                document.body.appendChild(love);
                setTimeout(() => { love.remove(); }, dur + 200);
            }

            /* Emoji popping - DIPERKECIL */
            function spawnEmoji() {
                const emojiList = ["ðŸŽ‰", "âœ¨", "ðŸŒŸ", "ðŸ¥³", "ðŸŽ€"];
                const emoji = document.createElement("div");
                emoji.className = "popEmoji";
                emoji.innerHTML = emojiList[Math.floor(Math.random() * emojiList.length)];

                emoji.style.left = (Math.random() * 80 + 10) + "vw";
                emoji.style.top = (Math.random() * 60 + 20) + "vh";

                document.body.appendChild(emoji);
                setTimeout(() => emoji.remove(), 600);
            }

            /* ANIMASI BARU DI LUAR PESAN - DIPERKECIL */
            function spawnBalloon() {
                const balloon = document.createElement("div");
                balloon.className = "balloon";

                // Random balloon color
                const colors = ["#ff6b6b", "#4ecdc4", "#45b7d1", "#96ceb4", "#feca57", "#ff9ff3", "#54a0ff"];
                const color = colors[Math.floor(Math.random() * colors.length)];
                balloon.style.backgroundColor = color;

                // Random horizontal movement
                const xMove = (Math.random() * 2 - 1).toFixed(2);
                balloon.style.setProperty('--x-move', xMove);

                // Random starting position
                balloon.style.left = Math.random() * 100 + "vw";

                document.body.appendChild(balloon);
                setTimeout(() => balloon.remove(), 8000);
            }

            function spawnCake() {
                const cake = document.createElement("div");
                cake.className = "bouncing-cake";
                cake.innerHTML = "ðŸŽ‚";

                // Random starting position
                cake.style.left = Math.random() * 80 + 10 + "vw";

                document.body.appendChild(cake);
                setTimeout(() => cake.remove(), 6000);
            }

            function spawnConfetti() {
                const confetti = document.createElement("div");
                confetti.className = "confetti";

                // Random confetti color
                const colors = ["#ff6b6b", "#4ecdc4", "#45b7d1", "#96ceb4", "#feca57", "#ff9ff3", "#54a0ff", "#5f27cd"];
                const color = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.backgroundColor = color;

                // Random starting position
                confetti.style.left = Math.random() * 100 + "vw";

                // Random size - DIPERKECIL
                const size = 4 + Math.random() * 8;
                confetti.style.width = size + "px";
                confetti.style.height = size + "px";

                // Random rotation
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;

                // Random animation duration
                const duration = 2 + Math.random() * 3;
                confetti.style.animationDuration = duration + "s";

                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), duration * 1000);
            }

            function spawnSparkle() {
                const sparkle = document.createElement("div");
                sparkle.className = "sparkle-message";

                // Random position
                sparkle.style.left = Math.random() * 100 + "vw";
                sparkle.style.top = Math.random() * 100 + "vh";

                // Random color
                const colors = ["#ffffff", "#ffd700", "#ff6b6b", "#4ecdc4", "#ff9ff3"];
                const color = colors[Math.floor(Math.random() * colors.length)];
                sparkle.style.backgroundColor = color;

                // Random size - DIPERKECIL
                const size = 2 + Math.random() * 5;
                sparkle.style.width = size + "px";
                sparkle.style.height = size + "px";

                // Random animation delay
                sparkle.style.animationDelay = Math.random() * 1.5 + "s";

                document.body.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 1500);
            }

            function spawnAnimal() {
                const animal = document.createElement("div");
                animal.className = "cute-animal";

                // Random animal emoji
                const animals = ["ðŸ°", "ðŸ±", "ðŸ¶", "ðŸ»", "ðŸ¼", "ðŸ¦Š", "ðŸ¨", "ðŸ¯", "ðŸ¦"];
                animal.innerHTML = animals[Math.floor(Math.random() * animals.length)];

                // Random horizontal movement
                animal.style.setProperty('--x-move', (Math.random() * 2 - 1).toFixed(2));

                // Random starting position
                animal.style.left = Math.random() * 100 + "vw";

                document.body.appendChild(animal);
                setTimeout(() => animal.remove(), 15000);
            }

            function spawnFloatingHeart() {
                const heart = document.createElement("div");
                heart.className = "floating-heart";
                const hearts = ["â¤ï¸", "ðŸ’–", "ðŸ’•", "ðŸ’˜", "ðŸ’ž", "ðŸ’“", "ðŸ’—"];
                heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];

                // Random horizontal movement
                const xMove = (Math.random() * 2 - 1).toFixed(2);
                heart.style.setProperty('--x-move', xMove);

                // Random starting position
                heart.style.left = Math.random() * 100 + "vw";

                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 8000);
            }

            /* Finish / End */
            giftBtn.addEventListener("click", function(event) {
                // Jalankan animasi hadiah
                createGiftAnimation(event);

                // Tunggu sebentar sebelum menampilkan end screen
                setTimeout(showEndScreen, 800);
            });

            function showEndScreen() {
                // guard: only allow if messageBox is currently visible (prevents accidental early calls)
                if (messageBox.style.display === "none") return;

                // stop intervals & typing
                if (heartInterval) { clearInterval(heartInterval); heartInterval = null; }
                if (emojiInterval) { clearInterval(emojiInterval); emojiInterval = null; }
                if (balloonInterval) { clearInterval(balloonInterval); balloonInterval = null; }
                if (cakeInterval) { clearInterval(cakeInterval); cakeInterval = null; }
                if (confettiInterval) { clearInterval(confettiInterval); confettiInterval = null; }
                if (sparkleInterval) { clearInterval(sparkleInterval); sparkleInterval = null; }
                if (animalInterval) { clearInterval(animalInterval); animalInterval = null; }
                if (floatingHeartInterval) { clearInterval(floatingHeartInterval); floatingHeartInterval = null; }
                if (typingTimeout) { clearTimeout(typingTimeout); typingTimeout = null; }

                // hide message and show end screen (grid centers content)
                messageBox.style.display = "none";
                messageBox.setAttribute('aria-hidden', 'true');
                endScreen.style.display = "grid";
                requestAnimationFrame(typeEndScreen);

                // pause bgm
                try { bgm.pause(); } catch (e) { }
            }

            /* Replay / Back */
            replayBtn.addEventListener("click", () => location.reload());

            giftEndBtn.addEventListener("click", function(event) {
                // Jalankan animasi hadiah
                createGiftEndAnimation(event);

                // Tunggu sebentar sebelum membuka link
                setTimeout(() => {
                    window.open("https://id.shp.ee/jjVwRJq", "_blank");
                }, 800);
            });

            /* Firework effect */
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            let w = canvas.width = window.innerWidth;
            let h = canvas.height = window.innerHeight;

            // Handle window resize
            window.addEventListener("resize", () => { 
                w = canvas.width = window.innerWidth; 
                h = canvas.height = window.innerHeight; 
            });

            let fireworks = [];
            let particles = [];

            class Firework {
                constructor() {
                    this.x = Math.random() * w;
                    this.y = h;
                    this.targetY = Math.random() * (h/2);
                    this.speed = 6 + Math.random() * 2;
                    this.color = `hsl(${Math.random() * 360},100%,60%)`;
                }
                update() {
                    this.y -= this.speed;
                    if (this.y <= this.targetY) {
                        for (let i = 0; i < 30; i++) particles.push(new Particle(this.x, this.y, this.color));
                        return true;
                    }
                    return false;
                }
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }
            }

            class Particle {
                constructor(x, y, color) {
                    this.x = x;
                    this.y = y;
                    this.color = color;
                    this.speed = Math.random() * 3 + 1.5;
                    this.angle = Math.random() * Math.PI * 2;
                    this.alpha = 1;
                }
                update() {
                    this.x += Math.cos(this.angle) * this.speed;
                    this.y += Math.sin(this.angle) * this.speed + 0.6;
                    this.alpha -= 0.02;
                    return this.alpha <= 0;
                }
                draw() {
                    ctx.globalAlpha = this.alpha;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                    ctx.globalAlpha = 1;
                }
            }

            function loop() {
                ctx.fillStyle = "rgba(3,3,6,0.22)";
                ctx.fillRect(0, 0, w, h);
                if (Math.random() < 0.05) fireworks.push(new Firework());
                fireworks = fireworks.filter(f => { f.draw(); return !f.update(); });
                particles = particles.filter(p => { p.draw(); return !p.update(); });
                requestAnimationFrame(loop);
            }
            loop();

            /* Accessibility: Enter to open from start */
            document.addEventListener("keydown", (e) => {
                if (e.key === "Enter" && startScreen.style.display !== "none") {
                    startExperience();
                }
            });

            /* ----------------------------
               Neon Title - random color pulse
               ---------------------------- */
            (function setupNeonTitle() {
                const title = document.getElementById("title");
                if (!title) return;

                let intervalId = null;

                function applyNeon(hue) {
                    // main color (light neon)
                    const main = `hsl(${hue} 100% 72%)`;
                    const glow1 = `hsl(${hue} 100% 60% / 0.95)`;
                    const glow2 = `hsl(${hue} 95% 50% / 0.72)`;
                    const outer = `hsl(${hue} 80% 40% / 0.45)`;

                    title.style.color = main;
                    title.style.textShadow =
                        `0 0 6px ${glow1}, 0 0 14px ${glow2}, 0 0 28px ${outer}, 0 6px 22px rgba(0,0,0,0.45)`;
                    // tiny scale pulse so change feels lively
                    title.style.transform = `scale(${1 + (Math.random() * 0.03)})`;
                }

                function pickAndApply() {
                    const hue = Math.floor(Math.random() * 360);
                    applyNeon(hue);
                }

                pickAndApply();
                intervalId = setInterval(pickAndApply, 1200);

                // pause/resume on visibility change to save CPU
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        if (intervalId) clearInterval(intervalId);
                        intervalId = null;
                    } else {
                        if (!intervalId) intervalId = setInterval(pickAndApply, 1200);
                        pickAndApply();
                    }
                });
            })();
        });
    
/* ================= END SCREEN TYPING (FINAL FIX) ================= */
const endTexts = [
  "Hai manusia favorit, semoga hari ini penuh berkah dan kebahagiaan yaa",
  "trimakasih telah membuat dunia kerjaku lebih berwarna walau jarang ngobrol sih,",
  "sebenernya pengen bisa ngobrol di luar tapii kayaknya gamungkin bisaa. apalagi semenjak tau wulan deket sama temen kerja juga",
  "tapi itu ga penting, yang penting sekarang Wulan harus bahagia, tambah sehat dan tambah cantik pulaa wkwk",
  "oh iya ini ada gift buat Wulan, traktirannya beli sendirii tapii hehehe. klik tombol ambil giftnya yaaa nanti langsung di arahin ke apk dana :)",
  "maaf ya cuma bisa ngasih ginian, berhubung gapunya foto cutenya wulan jadi ijin ngelink dari ppnya IGnya :v"
];

function typeEndScreen(){
  const lines = document.querySelectorAll("#endInner .typing-line");
  let idx = 0;

  function typeLine(){
    if(idx >= endTexts.length) return;
    const el = lines[idx];
    const text = endTexts[idx];
    let i = 0;
    el.textContent = "";
    el.classList.add("typing-cursor");

    const timer = setInterval(()=>{
      el.textContent += text.charAt(i);
      i++;
      if(i >= text.length){
        clearInterval(timer);
        el.classList.remove("typing-cursor");
        idx++;
        setTimeout(typeLine, 500);
      }
    }, 35);
  }
  typeLine();
}
/* ================================================================ */

</script>

    <!-- Additional cute features: whispers, sakura, bunnies, shine, gift explosion, loading -->
    <script>
    /* ======= Additional Cute Features: whispers, sakura, bunnies, shine, gift explosion, loading ======= */

(function addCuteFeatures() {
  // quick refs
  const body = document.body;
  const openBtnLocal = document.getElementById("openBtn");
  const giftBtnLocal = document.getElementById("giftBtn");
  const giftEndBtnLocal = document.getElementById("giftEndBtn");
  const profilePhotoWrapper = document.getElementById("profilePhotoWrapper");

  /* --------- Cute Loading Overlay --------- */
  const 

  /* show loading, small animations, then call startExperience */
  function showLoadingThenStart() {
    // lock: prevent double clicks
    openBtnLocal.disabled = true;
    openBtnLocal.classList.add("shine", "active-shine");

     catch(e){}

    // (removed preview of messageBox during loading)
    try {
      const ss = document.getElementById("startScreen");
      const mb = document.getElementById("messageBox");
      if (ss) ss.style.display = "none";
      if (mb) { mb.style.display = "flex"; mb.setAttribute("aria-hidden","false"); }
    } catch(e) { /* ignore */ }

    // small entrance petal + whispers while loading
    spawnWhisper("Menyiapkan kejutan...", 1500);
    spawnWhisper("MemanggilðŸ°", 1800);
    spawnWhisper("Menyusun confetti ðŸŽ‰", 2000);

    // animate loader quickly
    let p = 0;
    updateLoaderProgress(p);
    const step = setInterval(() => {
      p += 14 + Math.random()*12;
      updateLoaderProgress(p);
      if (p >= 100) {
        clearInterval(step);
        // small delay to let user see 100%
        setTimeout(() => {
          // hide overlay & continue original experience
          ); }
          } catch(e){}

          // start the original startExperience (already defined in file)
          try { startExperience(); } catch (e) {
            // fallback: manually call the original actions if startExperience isn't visible
            console.warn("startExperience not found, performing fallback");
            if (typeof window.startExperience === "function") window.startExperience();
          }
        }, 400);
      }
    }, 150);
  }

  // replace original openBtn handler (in your file it was startExperience)
  try {
    // remove any existing listener added earlier and add new
    openBtnLocal.removeEventListener("click", startExperience);
  } catch (e) {}
  openBtnLocal.addEventListener("click", showLoadingThenStart);

  /* --------- Whisper messages (No.10) --------- */
  const whisperPool = [
    "Stay cute ðŸ’•", "You're special ðŸŽ€", "Smile more ðŸ˜„", "Peluk virtual ðŸ¤—",
    "Senyum dong ðŸ˜", "Hore, hari spesialmu!", "Biar makin imut âœ¨", "Semoga makin bahagia ðŸ’–"
  ];
  function spawnWhisper(text, ttl = 1800) {
    const msg = document.createElement("div");
    msg.className = "whisperMsg";
    msg.innerText = text || whisperPool[Math.floor(Math.random()*whisperPool.length)];
    // start near center with slight randomness
    const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
    const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
    const left = (vw/2) + (Math.random()*140 - 70);
    const top = (vh/2) + (Math.random()*120 - 60);
    msg.style.left = left + "px";
    msg.style.top = top + "px";
    body.appendChild(msg);
    // animate in
    requestAnimationFrame(()=> {
      msg.style.transform = "translateY(-15px)";
      msg.style.opacity = "1";
    });
    setTimeout(()=> {
      msg.style.transform = "translateY(-35px)";
      msg.style.opacity = "0";
      setTimeout(()=> msg.remove(), 600);
    }, ttl);
  }

  /* --------- Gift Explosion upgrade (No.11) - DIPERKECIL --------- */
  function giftExplosionAt(x, y, count = 24) {
    const emojis = ["ðŸŽ€","ðŸŽ","ðŸ§¸","ðŸ’–","ðŸ°","ðŸŒ¸","âœ¨","ðŸŽ‰","ðŸ’«","ðŸ“"];
    for (let i=0;i<count;i++) {
      setTimeout(() => {
        const e = document.createElement("div");
        e.className = "gift-explode";
        e.innerText = emojis[Math.floor(Math.random()*emojis.length)];
        // random offset to start so they don't all overlap exactly
        e.style.left = (x + (Math.random()*30 - 15)) + "px";
        e.style.top = (y + (Math.random()*30 - 15)) + "px";
        e.style.fontSize = (14 + Math.random()*22) + "px";
        e.style.opacity = "1";
        body.appendChild(e);
        // random motion using transform + transition via keyframes already defined
        const tx = (Math.random()*130 - 65);
        const ty = -(70 + Math.random()*140);
        const rot = (Math.random()*720 - 360);
        e.animate([
          { transform: `translate(0,0) rotate(0deg) scale(0.8)`, opacity: 1 },
          { transform: `translate(${tx}px, ${ty}px) rotate(${rot}deg) scale(0.6)`, opacity: 0 }
        ], {
          duration: 900 + Math.random()*600,
          easing: "cubic-bezier(.2,.9,.3,1)",
          fill: "forwards"
        });
        setTimeout(()=> e.remove(), 1600);
      }, i * 35);
    }
  }

  // integrate with existing createGiftAnimation (if present)
  try {
    const oldCreate = createGiftAnimation;
    createGiftAnimation = function(e) {
      // call new explosion too
      const rect = giftBtnLocal.getBoundingClientRect();
      giftExplosionAt(rect.left + rect.width/2, rect.top + rect.height/2, 26);
      // call original for confetti if exists
      try { oldCreate(e); } catch(err){ /* ignore */ }
    };
  } catch (err) {
    // if createGiftAnimation wasn't defined earlier, just define it to call giftExplosion
    window.createGiftAnimation = function(e) {
      const rect = giftBtnLocal.getBoundingClientRect();
      giftExplosionAt(rect.left + rect.width/2, rect.top + rect.height/2, 26);
    };
  }

  /* also enhance giftEndBtn visual */
  giftEndBtnLocal.classList.add("shine");

  /* --------- Sakura Wind (No.13) - DIPERKECIL --------- */
  function spawnSakuraPetal(x, startY, size, delay, xMove, rotSpeed) {
    const petal = document.createElement("div");
    petal.className = "sakura-petal";
    petal.innerHTML = "ðŸŒ¸";
    petal.style.left = (x) + "px";
    petal.style.top = (startY) + "px";
    petal.style.fontSize = size + "px";
    petal.style.opacity = (0.7 + Math.random()*0.3);
    petal.style.transition = `transform ${5 + Math.random()*5}s linear, opacity ${5 + Math.random()*5}s linear`;
    body.appendChild(petal);
    // apply transform after small delay to trigger transition
    setTimeout(() => {
      petal.style.transform = `translate(${xMove}px, -${(window.innerHeight + 200)}px) rotate(${rotSpeed}deg)`;
      petal.style.opacity = "0";
    }, delay);
    setTimeout(()=> petal.remove(), 8000 + Math.random()*5000);
  }

  function spawnSakuraBurst(amount = 8) {
    for (let i=0;i<amount;i++) {
      const x = Math.random() * window.innerWidth;
      const startY = window.innerHeight + (Math.random()*50);
      const size = 10 + Math.random()*18;
      const delay = Math.random()*150;
      const xMove = (Math.random()*180 - 90) + (Math.random()*180);
      const rot = (Math.random()*720 - 360);
      spawnSakuraPetal(x, startY, size, delay, xMove, rot);
    }
  }

  // gentle background sakura spawn (on intervals only when experience started)
  let sakuraInterval = null;
  function startSakuraLoop() {
    if (sakuraInterval) return;
    sakuraInterval = setInterval(()=> spawnSakuraBurst(5 + Math.floor(Math.random()*6)), 3800 + Math.random()*1200);
  }
  function stopSakuraLoop() {
    if (sakuraInterval) { clearInterval(sakuraInterval); sakuraInterval = null; }
  }

  /* --------- Tiny Bunny Hop (No.18) - DIPERKECIL --------- */
  function spawnTinyBunnyOnce() {
    const bun = document.createElement("div");
    bun.className = "tiny-bunny";
    bun.innerText = "ðŸ°";
    body.appendChild(bun);
    // remove after it finishes animation (approx 3.6s)
    setTimeout(()=> bun.remove(), 4000);
  }

  // create recurring bunny loop
  let bunnyLoop = null;
  function startBunnyLoop() {
    if (bunnyLoop) return;
    spawnTinyBunnyOnce();
    bunnyLoop = setInterval(spawnTinyBunnyOnce, 6500 + Math.random()*5000);
  }
  function stopBunnyLoop() {
    if (bunnyLoop) { clearInterval(bunnyLoop); bunnyLoop = null; }
  }

  /* --------- Shine Pulse on Buttons (No.19) --------- */
  // add shine class to main interactive buttons
  [openBtnLocal, giftBtnLocal, giftEndBtnLocal, document.getElementById("replayBtn")].forEach(btn => {
    if (btn) btn.classList.add("shine");
  });

  /* --------- Hook into lifecycle: when experience starts, enable loops --------- */
  // override startExperience to also start sakura & bunny loops and whispers
  try {
    const originalStart = startExperience;
    window.startExperience = function() {
      try { originalStart(); } catch(e){ console.warn(e); }
      // start gentle sakura/bunny after experience begins
      startSakuraLoop();
      startBunnyLoop();
      // periodic whisper popups during experience
      window._whisperKeeper = setInterval(()=> spawnWhisper(), 3200 + Math.random()*2000);
      // ensure gift button has shine interactive pulse
      if (giftBtnLocal) giftBtnLocal.classList.add("shine");
    };
  } catch (err) {
    console.warn("Could not wrap startExperience (maybe defined after). Ignoring wrapper.");
  }

  // also stop loops when showEndScreen called (if defined in file)
  try {
    const oldShowEnd = showEndScreen;
    showEndScreen = function() {
      try { oldShowEnd(); } catch(e){ console.warn(e); }
      stopSakuraLoop();
      stopBunnyLoop();
      if (window._whisperKeeper) { clearInterval(window._whisperKeeper); window._whisperKeeper = null; }
    };
  } catch (err) { /* ignore */ }

  /* --------- Small enhancement: clicking giftEndBtn triggers big explosion - DIPERKECIL --------- */
  giftEndBtnLocal.addEventListener("click", (ev) => {
    const r = giftEndBtnLocal.getBoundingClientRect();
    giftExplosionAt(r.left + r.width/2, r.top + r.height/2, 36);
  });

})();
    </script>

<div id="whisperContainer"></div>

<script>
function showWhisper(text){
  const container = document.getElementById('whisperContainer');
  if(!container) return;
  const w = document.createElement('div');
  w.className = 'whisper-float';
  w.textContent = text;
  w.style.left = (45 + Math.random() * 10) + '%';
  container.appendChild(w);
  setTimeout(()=> w.remove(), 6500);
}

// contoh pemanggilan otomatis
document.addEventListener('DOMContentLoaded', ()=>{
  setTimeout(()=> showWhisper("Aku selalu di sini ðŸ¤"), 3000);
  setTimeout(()=> showWhisper("Pelan-pelan bacanya yaâ€¦"), 7000);
});
</script>


<script>
(function WhisperSync(){
  const whispers = [
    { t: 6,  text: "Aku selalu di sini ðŸ¤" },
    { t: 14, text: "Pelan-pelan bacanya yaâ€¦" },
    { t: 22, text: "Semoga kamu ngerasa ditemani âœ¨" },
    { t: 32, text: "Ini cuma buat kamuâ€¦" }
  ];

  const fired = {};
  function init(){
    const audio = document.getElementById('bgm') || document.querySelector('audio');
    if(!audio) return;

    audio.addEventListener('timeupdate', ()=>{
      whispers.forEach(w=>{
        if(audio.currentTime >= w.t && !fired[w.t]){
          fired[w.t] = true;
          if(typeof showWhisper === 'function'){
            showWhisper(w.text);
          }
        }
      });
    });
  }
  document.addEventListener('DOMContentLoaded', init);
})();
</script>


<div id="cuteLayer" class="cute-layer"></div>

<script>
(function(){
  const icons = ["ðŸ’–","ðŸ’—","âœ¨","ðŸŒ¸","ðŸŽ€","ðŸ«¶","â­"];
  const layer = document.getElementById('cuteLayer');

  function spawnCute(){
    if(!layer) return;
    const el = document.createElement('div');
    el.className = 'cute-item';
    el.textContent = icons[Math.floor(Math.random()*icons.length)];
    el.style.left = Math.random()*100 + '%';
    el.style.bottom = '-10%';
    el.style.animationDuration = (6 + Math.random()*4) + 's';
    layer.appendChild(el);
    setTimeout(()=> el.remove(), 12000);
  }

  // spawn loop (lembut)
  setInterval(spawnCute, 1200);
})();
</script>


<!-- COUNTDOWN OVERLAY -->
<div id="countdownOverlay" style="display:none">
  <div class="countdown-cute" id="countdownCute"></div>
  <div id="countdownNumber">3</div>
</div>


<script>
/* ===== SAFE COUNTDOWN GATE (NO STUCK) ===== */
document.addEventListener('DOMContentLoaded', ()=>{
  const openBtn = document.getElementById('openBtn');
  if(!openBtn) return;

  const overlay = document.getElementById('countdownOverlay');
  const num = document.getElementById('countdownNumber');

  // store original handlers
  const originalHandlers = [];
  if(openBtn.onclick) originalHandlers.push(openBtn.onclick);

  // clone listeners trick: replace button
  const newBtn = openBtn.cloneNode(true);
  openBtn.parentNode.replaceChild(newBtn, openBtn);

  newBtn.addEventListener('click', (e)=>{
    e.preventDefault();

    let count = 3;
    overlay.style.display = 'flex';
    num.textContent = count;

    const timer = setInterval(()=>{
      count--;
      if(count >= 0){
        num.textContent = count;
        num.style.animation = 'none';
        num.offsetHeight;
        num.style.animation = 'countPop 1s ease-in-out';
      }
      if(count < 0){
        clearInterval(timer);
        overlay.style.display = 'none';

        // trigger original click by programmatic click
        newBtn.replaceWith(openBtn);
        openBtn.click();
      }
    },1000);
  });
});
</script>


<script>
/* ===== CUTE EFFECT DURING COUNTDOWN ===== */
(function(){
  const icons = ["ðŸ’–","âœ¨","ðŸŽ€","ðŸŒ¸","â­","ðŸ’«"];
  function spawnCute(){
    const layer = document.getElementById('countdownCute');
    if(!layer) return;
    for(let i=0;i<6;i++){
      const el = document.createElement('div');
      el.className = 'cute-pop';
      el.textContent = icons[Math.floor(Math.random()*icons.length)];
      el.style.left = Math.random()*100 + '%';
      el.style.bottom = '30%';
      el.style.animationDelay = (Math.random()*0.2) + 's';
      layer.appendChild(el);
      setTimeout(()=>el.remove(),1800);
    }
  }

  // hook into number changes
  const num = document.getElementById('countdownNumber');
  if(num){
    const obs = new MutationObserver(()=> spawnCute());
    obs.observe(num,{childList:true});
  }
})();
</script>


<script>
/* ===== FIX MUSIC PLAY AFTER COUNTDOWN (USER GESTURE SAFE) ===== */
(function(){
  function playMusicSafe(){
    const audio = document.getElementById('bgm') || document.querySelector('audio');
    if(!audio) return;
    audio.muted = false;
    audio.volume = 1;
    const p = audio.play();
    if(p && typeof p.catch === 'function'){
      p.catch(()=>{
        // fallback: try again on first interaction
        const once = ()=>{
          audio.play().catch(()=>{});
          document.removeEventListener('touchstart', once);
          document.removeEventListener('click', once);
        };
        document.addEventListener('touchstart', once, { once:true });
        document.addEventListener('click', once, { once:true });
      });
    }
  }

  // hook when countdown overlay disappears
  const overlay = document.getElementById('countdownOverlay');
  if(overlay){
    const obs = new MutationObserver(()=>{
      if(getComputedStyle(overlay).display === 'none'){
        playMusicSafe();
        obs.disconnect();
      }
    });
    obs.observe(overlay, { attributes:true, attributeFilter:['style','class'] });
  }
})();
</script>


<script>
/* ===== TRIGGER LOVE EXPLOSION AT 0 ===== */
(function(){
  function explodeLove(){
    const wrap = document.createElement('div');
    wrap.className = 'love-burst';
    const icons = ["ðŸ’–","ðŸ’—","ðŸ’•","ðŸ’ž","ðŸ’˜","â¤ï¸"];
    for(let i=0;i<24;i++){
      const s = document.createElement('span');
      s.textContent = icons[Math.floor(Math.random()*icons.length)];
      const x = (Math.random()*300 - 150) + 'px';
      const y = (Math.random()*300 - 150) + 'px';
      s.style.setProperty('--x', x);
      s.style.setProperty('--y', y);
      wrap.appendChild(s);
    }
    document.body.appendChild(wrap);
    setTimeout(()=> wrap.remove(), 1800);
  }

  const overlay = document.getElementById('countdownOverlay');
  if(overlay){
    const obs = new MutationObserver(()=>{
      if(getComputedStyle(overlay).display === 'none'){
        explodeLove();
        obs.disconnect();
      }
    });
    obs.observe(overlay,{attributes:true,attributeFilter:['style','class']});
  }
})();
</script>


<script>
/* ========= TRUE FIREWORK TEXT (POINT-BASED) ========= */
(function(){
  const canvas = document.getElementById("canvas");
  if(!canvas) return;
  const ctx = canvas.getContext("2d");

  function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener("resize", resize);

  function getTextPoints(text, size){
    const off = document.createElement("canvas");
    const octx = off.getContext("2d");
    off.width = canvas.width;
    off.height = canvas.height;

    octx.clearRect(0,0,off.width,off.height);
    octx.fillStyle = "#fff";
    octx.textAlign = "center";
    octx.textBaseline = "middle";
    octx.font = `bold ${size}px Poppins, sans-serif`;
    octx.fillText(text, off.width/2, off.height/2);

    const data = octx.getImageData(0,0,off.width,off.height).data;
    const pts = [];
    for(let y=0;y<off.height;y+=5){
      for(let x=0;x<off.width;x+=5){
        if(data[(y*off.width+x)*4+3] > 128){
          pts.push({x,y});
        }
      }
    }
    return pts;
  }

  class Particle{
    constructor(tx,ty){
      this.tx = tx;
      this.ty = ty;
      this.x = tx;
      this.y = canvas.height + Math.random()*200;
      this.vx = (Math.random()-0.5)*4;
      this.vy = -Math.random()*10 - 8;
      this.life = 0;
    }
    update(){
      this.x += this.vx;
      this.y += this.vy;
      this.vy += 0.2;

      // attract to text point
      this.x += (this.tx - this.x) * 0.12;
      this.y += (this.ty - this.y) * 0.12;
      this.life++;
    }
    draw(){
      ctx.fillStyle = "rgba(255,120,220,0.95)";
      ctx.beginPath();
      ctx.arc(this.x,this.y,2,0,Math.PI*2);
      ctx.fill();
    }
  }

  let particles = [];
  let running = false;

  function start(text){
    particles = [];
    const points = getTextPoints(text, Math.min(canvas.width*0.28,220));
    points.forEach(p => particles.push(new Particle(p.x,p.y)));
    running = true;
    animate();
  }

  function animate(){
    if(!running) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{p.update();p.draw();});
    requestAnimationFrame(animate);
  }

  const openBtn = document.getElementById("openBtn");
  if(openBtn){
    openBtn.addEventListener("click", ()=>{
      setTimeout(()=>start(" HBD WULAN "), 200);
    });
  }
})();
</script>


<script>
// === PLAY MUSIC WHEN GIFT BUTTON CLICKED ===
document.addEventListener("DOMContentLoaded", () => {
  const giftBtn = document.getElementById("giftBtn");
  if(!giftBtn) return;

  let audio;
  giftBtn.addEventListener("click", () => {
    if(!audio){
      audio = new Audio("https://bit.ly/4qlTvap");
      audio.loop = false;
    }
    audio.play().catch(()=>{});
  });
});
</script>


<!-- ================= FIREWORK EFFECT (ADDED) ================= -->
<script>
(function () {
    const canvas = document.getElementById("canvas");
    if (!canvas) return;
    const ctx = canvas.getContext("2d");

    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;

    window.addEventListener("resize", () => {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
    });

    class Particle {
        constructor(x, y, color) {
            this.x = x;
            this.y = y;
            this.vx = (Math.random() - 0.5) * 6;
            this.vy = (Math.random() - 0.5) * 6;
            this.alpha = 1;
            this.color = color;
        }
        update() {
            this.x += this.vx;
            this.y += this.vy;
            this.vy += 0.02;
            this.alpha -= 0.015;
            return this.alpha <= 0;
        }
        draw() {
            ctx.globalAlpha = this.alpha;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
            ctx.globalAlpha = 1;
        }
    }

    class Firework {
        constructor() {
            this.x = Math.random() * w;
            this.y = h;
            this.targetY = Math.random() * h * 0.5;
            this.speed = 8 + Math.random() * 3;
            this.color = `hsl(${Math.random() * 360},100%,70%)`;
        }
        update() {
            this.y -= this.speed;
            if (this.y <= this.targetY) {
                for (let i = 0; i < 40; i++) {
                    particles.push(new Particle(this.x, this.y, this.color));
                }
                return true;
            }
            return false;
        }
        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
        }
    }

    let fireworks = [];
    let particles = [];

    function loop() {
        ctx.fillStyle = "rgba(3,3,6,0.25)";
        ctx.fillRect(0, 0, w, h);

        if (Math.random() < 0.05) fireworks.push(new Firework());

        fireworks = fireworks.filter(f => {
            f.draw();
            return !f.update();
        });

        particles = particles.filter(p => {
            p.draw();
            return !p.update();
        });

        requestAnimationFrame(loop);
    }
    loop();
})();
</script>


<!-- FIREWORK ROCKET CANVAS -->
<canvas id="rocketCanvas"></canvas>

<script>
/* ===== ROCKET FIREWORK BACKGROUND ===== */
(function(){
  const canvas = document.getElementById("rocketCanvas");
  if(!canvas) return;
  const ctx = canvas.getContext("2d");

  let w,h;
  
  const DPR = Math.min(1.25, window.devicePixelRatio || 1);
  function resize(){
    w = canvas.width = innerWidth * DPR;
    h = canvas.height = innerHeight * DPR;
    canvas.style.width = innerWidth + "px";
    canvas.style.height = innerHeight + "px";
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }

  resize();
  addEventListener("resize", resize);

  class Particle{
    constructor(x,y,c){
      this.x=x; this.y=y;
      this.vx=(Math.random()-0.5)*6;
      this.vy=(Math.random()-0.5)*6;
      this.a=1;
      this.c=c;
    }
    update(){
      this.x+=this.vx;
      this.y+=this.vy;
      this.vy+=0.04;
      this.a-=0.015;
      return this.a<=0;
    }
    draw(){
      ctx.globalAlpha=this.a;
      ctx.fillStyle=this.c;
      ctx.beginPath();
      ctx.arc(this.x,this.y,2.5,0,Math.PI*2);
      ctx.fill();
      ctx.globalAlpha=1;
    }
  }

  class Firework{
    constructor(){
      this.x=Math.random()*w;
      this.y=h;
      this.ty=Math.random()*h*0.45;
      this.v=8+Math.random()*4;
      this.c=`hsl(${Math.random()*360},100%,70%)`;
    }
    update(){
      this.y-=this.v;
      if(this.y<=this.ty){
        for(let i=0;i<24;i++) particles.push(new Particle(this.x,this.y,this.c));
        return true;
      }
      return false;
    }
    draw(){
      ctx.fillStyle=this.c;
      ctx.beginPath();
      ctx.arc(this.x,this.y,2,0,Math.PI*2);
      ctx.fill();
    }
  }

  let fireworks=[], particles=[];

  function loop(){
    ctx.fillStyle="rgba(0,0,0,0.12)";
    ctx.fillRect(0,0,w,h);

    if(Math.random()<0.02) fireworks.push(new Firework());

    fireworks=fireworks.filter(f=>{
      f.draw();
      return !f.update();
    });

    particles=particles.filter(p=>{
      p.draw();
      return !p.update();
    });

    requestAnimationFrame(loop);
  }
  loop();
})();
</script>

<div id="signature">from A.M.</div>
</body>
</html>
